var documenterSearchIndex = {"docs":
[{"location":"model-outputs/","page":"Output files","title":"Output files","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"model-outputs/#model-outputs","page":"Output files","title":"Output files","text":"","category":"section"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"When Macro is run, it generates several output files in the following folders:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"otuputs \n└───NAME\n    └───calibration\n    └───[diagnostics]\n    └───results","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"The NAME of the folder under outputs is specified by the output_folder parameter in the configuration file. The diagnostics folder is only present if the report-diagnostics parameter is set to true in the configuration file.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Different scenarios can be specified by different configuration files, with different output_folder parameters set. In that case, there will be several folders:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"otuputs \n└───NAME 1\n    └───calibration\n    └───[diagnostics]\n    └───results\n└───NAME 2\n    └───calibration\n    └───[diagnostics]\n    └───results\n...","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"In addition, Macro writes a log file called LEAPMacro_log_XXXX.txt to the main folder, where XXXX is the output_folder specified in the configuration file. If the model fails, then the error message will be written to the log file.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"info: Naming convention when Macro is run with energy sectors included\nThe Macro model is meant to be run together with LEAP, as explained in the page on the LEAP-Macro link. LEAP calculates demand for energy and energy production, while Macro covers the rest of the economy – the energy sectors specified in the configuration file are excluded from Macro's calculations. However, for calibration it can be useful to run Macro separately from LEAP, with the energy sectors included. This is done by setting include_energy_sectors = true when calling the LEAPMacro.run() function (see Running the Macro model for details.)When Macro is run with energy sectors included, the output folder is named XXXX_full, where XXXX is the output_folder specified in the configuration file.","category":"page"},{"location":"model-outputs/#model-outputs-diagnostics","page":"Output files","title":"The diagnostics folder","text":"","category":"section"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"When the report-diagnostics parameter is set to true, a variety of diagnostic outputs are reported.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"One crucial diagnostic indicator, which is motivated in Isolating the energy sector is given in the file nonenergy_energy_link_measure.txt. It contains a message like the following:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Measure of the significance to the economy of the supply of non-energy goods and services to the energy sector:\nThis value should be small: 2.52%.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Whether the estimated parameter is sufficiently small or not depends on the purposes of the analysis. For the Freedonia sample model, it suggests that excluding the demand by the energy sector of non-energy goods and services could lead to a 2.52% discrepancy.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"An additional set of files with names such as model_0_2010.txt provide an export of the linear goal program prepared by the Macro model. Examining these files can sometimes be helpful when the log file indicates an error in JuMP (the Julia mathematical programming library). The file offers an explicit formulation of the model, with the calculated parameters:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Min 1.7333333333333334 ugap[1] + 0.5333333333333333 ugap[2] + 0.6000000000000001 ugap[3] + ...\nSubject to\n eq_util[1] : ugap[1] + u[1] == 1.0\n eq_util[2] : ugap[2] + u[2] == 1.0\n eq_util[3] : ugap[3] + u[3] == 1.0\n eq_util[4] : ugap[4] + u[4] == 1.0\n...","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Some of the files provide \"sanity checks\" on the input data. ","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"demand_coefficients.csv: These should sum to a total less than one down the columns\n[energy_share.csv]: If present, these should be less than one (only reported if energy sectors are excluded)\nimported_fraction.csv: These should be less than one\nprofit_margins.csv: These should be greater than 1 but (usually) less than 2\nsupply_fractions.csv: These should sum to one along columns (unless the product is not produced domestically, in which case the sum will be zero)","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Other files report figures that should be close to, although not necessarily identical to, the corresponding values in the supply-use table. The differences arise because Macro compensates for territorial adjustments or stock changes:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"domestic_production.csv\nexports.csv\nfinal_demand.csv\nimports.csv\ninvestment.csv\nmargins.csv\nsector_output.csv\ntot_intermediate_demand_all_products.csv\ntot_intermediate_supply_all_sectors.csv\ntot_intermediate_supply_non-energy_sectors.csv: Note that these values will be lower than in the supply-use table due to the excluded energy sectors\nwages.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"If intermediate demand coefficients are calculated endogenously, then a further set of files will be reported containing tables of intermediate demand coefficients for each year of the simulation:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"demand_coefficients_[year].csv","category":"page"},{"location":"model-outputs/#The-calibration-folder","page":"Output files","title":"The calibration folder","text":"","category":"section"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"The files in this folder are generated after further adjustments and a calibration run of the linear goal program. Some of these files can also be used as a \"sanity check\", including:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"basic_prices_0.csv: These should be close to 1\ncapacity_utilization_0.csv: These should be less than or equal to 1, and most should be close to 1\ncapital_output_ratio_0.csv: These should normally lie between 1 and 4, but may be outside that range\nmargins_neg_0.csv and margins_pos_0.csv: These should sum to the same total\nwage_share_0.csv: These should be less than 1","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Others of the files in the calibration folder have names similar to the diagnostics folder. The values may be noticeably different due to the adjustments carried out by the Macro model:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"domestic_production_0.csv\nexports_0.csv\nfinal_demand_0.csv\nimports_0.csv\nsector_output_0.csv\ntot_intermediate_supply_non-energy_sectors_0.csv","category":"page"},{"location":"model-outputs/#model-outputs-results","page":"Output files","title":"The results folder","text":"","category":"section"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"The results folder contains the simulation results from the model. Once the model is fully developed, calibrated, and running in practice, this is the most interesting folder to look at.","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"When running with LEAP, the Macro model may be run several times to converge on a consistent set of results. The results folder contains outputs from each of the runs: (Image: Results folder contents)","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"warning: Results cover only non-energy sectors\nBy default, the Macro model reports results only for non-energy sectors. To include all sectors, set the option include_energy_sectors = true when running the Macro model. ","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Two of the results files (with the run number indicated by #) contain multiple variables:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"indices_#.csv: The indices that are passed to LEAP, as specified in the configuration file (if no indices are defined, then this file will not be written)\ncollected_variables_#.csv: A set of key variables, such as net exports, GDP, and so on","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Macro is a demand-driven model, so economic growth is driven by final demand, exports net of imports, and investment. Total investment expenditure is reported in collected_variables_#.csv. Final demand, exports, and imports are reported by product:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"final_demand_#.csv\nexports_#.csv and imports_#.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Output by sector is reported as actual output and potential output (that is, output at full capacity utilization). The ratio of actual to potential output is capacity utilization, which is reported separately:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"sector_output_#.csv\npotential_sector_output_#.csv\ncapacity_utilization_#.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Real value added by sector – that is, sector output less the cost of intermediate goods and services – is also reported:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"real_value_added_#.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"A further sector indicator, domestic insertion, is a measure of direct and indirect demand for domestic products by sector:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"domestic_insertion.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"Investment rates are determined by the autonomous investment rate, the profit rate, capacity utilization, and the interest rate. The autonomous investment rate is an expectation of future growth, which gradually adjusts over time in response to realized growth (that is, the model features \"adaptive expectations\"). The interest rate is reported in collected_variables_#.csv, while the capacity utilization file was listed above. The other relevant files are:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"profit_rate_#.csv\nautonomous_investment_rate_#.csv","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"In Macro, world prices of tradeable goods and services are exogenous, so they are not reported. Domestic prices are calculated endogenously by applying a markup. \"Basic\" prices of goods and services are calculated as a trade-weighted average of the world and domestic price. Domestic and basic prices are reported in the files:","category":"page"},{"location":"model-outputs/","page":"Output files","title":"Output files","text":"domestic_prices_#.csv\nbasic_prices_#.csv","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"sut/#sut","page":"Supply-use table","title":"Supply-use table","text":"","category":"section"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"Supply and use tables (or \"supply-use tables\" for short) are part of national economic accounts.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"The supply table records the total value of payments for goods and services sold by businesses within the country, together with imports. To those \"basic\" values are added taxes net of subsidies, as well as an adjustment for trade and transport margins.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"The margins correct for goods, such as agricultural produce, whose sales are recorded in, say, wholesale trade or commercial transport. Entries in the margins columns of the supply table subtract the value of payments from wholesale and commercial transport and add the value to the corresponding product – in this example, agricultural produce.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"The use table records sales of goods and services to businesses – termed intermediate use – as well as sales to households and the government – final domestic use – and to export markets. Sales are also recorded for investment goods, such as buildings and machinery, including the cost of construction and installation. Sometimes investment is reported separately for business, households, and the government.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"Total sales by businesses, net of intermediate payments, is \"value added\". In the use table, value added is allocated to payments to so-called \"factors of production\", in particular the wages and salaries of employees and the businesses' profit, together with associated taxes and social payments. The total of value added across all sectors is GDP.[1]","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"[1]: Specifically, it is GDP at market prices. Subtracting taxes on production activities and adding subsidies (so-called \"indirect\" taxes such as registration fees, rather than direct taxes and subsidies on products) gives GDP at factor cost.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"tip: Availability of supply-use tables\nUnlike GDP, which is updated at least each year, and sometimes more frequently, in most countries supply-use tables (SUTs) – or related products, such as input-output (I-O) tables or social accounting matrices (SAMs) – are calculated infrequently. In some countries the national statistical office may not report SUTs, I-O tables, or SAMs at all. If none is available, then the Macro model cannot be applied. However, by now a large number of countries do have at least one set of tables. One particularly good source is the International Food Policy Research Institute (IFPRI), which has been assisting countries with constructing SAMs. They make the datasets and documentation available on the IFPRI Dataverse.For more information on supply-use tables, see Handbook on Supply and Use Tables and Input-Output Tables with Extensions and Applications from UN Statistics\nFor more information on SAMs, see Social accounting matrices and multiplier analysis: An introduction with exercises from the International Food Policy Research Institute.","category":"page"},{"location":"sut/#Format-of-the-supply-use-table","page":"Supply-use table","title":"Format of the supply-use table","text":"","category":"section"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"The supply-use table is the most flexible of the Macro model input files. That is because supply-use tables vary widely in their level of detail and layout. However, Macro does have some restrictions, so some processing is normally required:","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"All of the tables must be in a single comma-separated variable (CSV) file;\nThe tables and columns must be oriented in a specific direction, with products labeling rows and sectors labeling columns;\nTo be summed together, groups of columns or groups of rows must be next to each other.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"info: Aggregate products that are close substitutes\nBecause of the Macro model logic, it is best if the table is not too disaggregated. Specifically, different products should not be close substitutes for one another. For example, if crops are represented, then \"cereals\" might be a useful category, but reporting different cereal grains as separate products – such as rice, wheat, maize, and sorghum – could be problematic if they are readily substituted in diets. If one of those grains were very unlikely to be substituted for the others, such as rice, then \"rice\" and \"other cereals\" could be a reasonable level of aggregation.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"Many supply-use tables or social accounting matrices are provided as Excel files (or STATA, SPSS, or other format). What is more, sometimes the supply table will be on one worksheet tab and the use table on another, or even in separate files. For the Macro model to use them, they must be placed into a single CSV file.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"info: Comma-separated variable (CSV) files\nCSV-formatted files are plain text files that can be viewed in a text editor. They can also be opened and modified in Excel, Google Sheets, or other spreadsheet program, which is a convenient way to edit them. Here is a portion of the supply-use table for the Freedonia example model, opened in Excel:(Image: Freedonia supply-use table)","category":"page"},{"location":"sut/#Linking-the-supply-use-table-to-Macro","page":"Supply-use table","title":"Linking the supply-use table to Macro","text":"","category":"section"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"The link between the supply-use table file and the Macro model is specified in the configuration file. The relevant block in the configuration file specifies the range in the CSV file for two matrices – the supply table and the use table – with products labeling the rows and sectors labeling the columns.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"In addition to the matrices there are columns (with entries for each product) and rows (with entries for each sector). Macro does not require all of the columns and rows in the table to be identified – it uses a subset of them. Furthermore, it will sum up adjacent columns and rows. For example, in Macro, \"final demand\" includes household and government expenditure. There may be many households listed, particularly in a social accounting matrix.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"For more details, see the section on linking to the supply-use table in the documentation for the configuration file.","category":"page"},{"location":"sut/","page":"Supply-use table","title":"Supply-use table","text":"info: Terminology for supply-use tables\nThere are standard short-hand terms used in economic modeling that are named more descriptively in most supply-use tables or social accounting matrices. For example, \"investment\" is usually reported as \"gross fixed capital formation\" (GFCF), to distinguish it from net fixed capital formation (net of depreciation) and additions to inventories. Here is a partial list:Term in the Macro model Other terms you might see\nsectors industries, activities\nproducts commodities, goods and services\nwages wages and other compensation, labor (as a factor)\nprofits gross operating surplus, surplus, capital (as a factor)\ninvestment gross fixed capital formation, GFCF\nstock changes changes in inventories","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"installation/#installation","page":"Installation","title":"Installing LEAP-Macro","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"LEAP-Macro is installed via GitHub. You must first have a working Julia installation on your computer. The LEAP-Macro team has verified LEAP-Macro's compatibility with Julia 1.9; other versions of Julia may not work correctly.","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Once Julia is set up, start a Julia session and add the LEAP-Macro package (named LEAPMacro). Once Julia is started, press the ] key to open up the package manager, and then add LEAPMacro.jl from GitHub:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"julia> ]\n\npkg> add https://github.com/sei-international/LEAPMacro.jl","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"To update to the newest code after LEAP-Macro is installed, use update:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"julia> ]\n\npkg> update LEAPMacro","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"leap-exercise/#leap-exercise","page":"LEAP exercise","title":"LEAP exercise","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"In this exercise you are going to add a macroeconomic model to LEAP using the LEAP-Macro module. First, you will run a set of macroeconomic scenarios. Then, you will introduce investment costs and run a set of alternative investment scenarios.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Make sure you start with a data set that has all of the data entry completed through LEAP Exercise 3.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"warning: Pre-requisites\nFor this exercise, you must have a licensed version of LEAP: see the LEAP website for details. Registered users can find additional exercises on the LEAP website. You must also install LEAP-Macro. To make sure the installation was successful, it is best to follow the Quick Start  instructions before running this exercise.","category":"page"},{"location":"leap-exercise/#Getting-ready","page":"LEAP exercise","title":"Getting ready","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"There are a few preparatory steps required before modifying the Freedonia LEAP area.","category":"page"},{"location":"leap-exercise/#Prepare-the-Freedonia-area","page":"LEAP exercise","title":"Prepare the Freedonia area","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"First, open the Freedonia area and revert to version 3.6.0: More Transformation. Then, save your changes, close LEAP, and keep it closed during the next steps.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Reverting to version 3.6.0: More Transformation)","category":"page"},{"location":"leap-exercise/#Move-the-Freedonia-LEAP-Macro-files-to-the-LEAP-Areas-folder","page":"LEAP exercise","title":"Move the Freedonia LEAP-Macro files to the LEAP Areas folder","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"As explained under Quick Start, a full Macro model for the Freedonia LEAP area is available in a zip file called Macro.zip. Unzip the file and save the contents in a new sub-folder within the Freedonia LEAP Areas folder, following these steps:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Copy Macro.zip into the LEAP Areas\\Freedonia folder\nUnzip the files into a folder called Macro","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"info: The LEAP Areas folder\nNormally the LEAP Areas folder is located in your Windows user’s Documents folder. To verify the location on your computer, open LEAP and look in Settings > Folders > Areas.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Unzipping the macro.zip files)","category":"page"},{"location":"leap-exercise/#Modifying-LEAP","page":"LEAP exercise","title":"Modifying LEAP","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"The next steps involve modifying LEAP so that it can interface with the Macro model. Not many changes are needed, and all of them are in Key Assumptions.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"First, start LEAP. Next, in Analysis View, open the Key Assumptions branch and change to Current Accounts:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Starting in Current Accounts Analysis View)","category":"page"},{"location":"leap-exercise/#Entering-GDP-and-calculating-income","page":"LEAP exercise","title":"Entering GDP and calculating income","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"In the current implementation, the Key Assumption “Income” is input data, while “GDP” is calculated. However, the Macro model will calculate an index for GDP, so you will need to reverse this.[1]","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"To determine an appropriate value for GDP, open the supply and use table file and look for total value added, because that is equal to GDP. It is easiest to do that using Excel’s “freeze panes” feature. For this file, total value added is in cell X36, and is equal to 112706. The values in this file are in millions of US$, while the GDP entered in LEAP is in billions of US$. So, dividing this value by 1000 gives 112.7 billion US$.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Finding total value added in the Supply-Use table using \"freeze panes\")","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"So, for the first change, enter 112.7 into Key Assumption “GDP” and save the LEAP area:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Entering value for GDP)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Next, calculate Income as GDP divided by population:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Setting income calculation in current accounts)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Also remove the expression for Income in the Baseline scenario, so that it will default to the Current Accounts expression:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Clearing income calculation in scenario)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Finally, because the “Income Growth_Rate” Key Assumption is no longer used, you can delete it:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Deleting \"Income Growth_Rate\" key assumption)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"[1]: Actually, Macro calculates value added in non-energy sectors, since LEAP is taking care of the energy sectors. An index of total non-energy value added is used as a proxy for an index of GDP growth.","category":"page"},{"location":"leap-exercise/#Changing-the-population-growth-rate","page":"LEAP exercise","title":"Changing the population growth rate","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"In the standard Freedonia model, population growth is steady across the entire scenario. More realistically, population growth can be expected to slow as incomes increase. To allow for a changing population growth rate, enter the following into the Baseline scenario for the “Pop Growth_Rate” Key Assumption:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"InterpFSY(2015, 2.55, 2020, 2.50, 2025, 2.41, 2030, 2.28, 2035, 2.16, 2040, 2.03)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Setting the population growth rate)","category":"page"},{"location":"leap-exercise/#Adding-Employment-to-Key-Assumptions","page":"LEAP exercise","title":"Adding Employment to Key Assumptions","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Macro calculates an index for employment. It is not necessary to read that into LEAP, since it is not used in any LEAP calculations. However, it is an interesting policy variable, so go ahead and add it to the Freedonia model:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Adding the employment Key Assumption)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Enter a value of 22 million people for Current Accounts: ","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Setting employment in the current accounts)","category":"page"},{"location":"leap-exercise/#Adding-investment-costs","page":"LEAP exercise","title":"Adding investment costs","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"In the configuration file for Macro, the sectors Coal Mining (scoal), Petroleum and Natural Gas (spetr) and Electricity, Water, and Sewage (s_util) are excluded from the calculations, on the understanding that they are tracked in LEAP. That means that Macro will not estimate investment expenditure for those sectors, which can be an important source of demand, which affects economic output and energy demand. When energy-related investment costs are included in the model, they are collected and added to total investment demand in the Macro model. LEAP and Macro are run iteratively to convergence.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"To add investment costs, first switch on costing by going to the Scope & Scale tab of the Settings screen and enable Costs. The Costs tab will become active. The settings on the Costs tab do not affect the link to the Macro model, so you can close the dialog.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Make sure you are in Current Accounts. Then, go to the “Transformation\\Electricity Generation\\Processes” branch and select the Capital Cost variable. Relevant values are in the table below. Make sure that the units are either US$/kW or, equivalently, 1000 US$/MW.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Type of plant Capital cost ($/kW)\nExisting Plants \nExisting Coal Steam 1000\nExisting Hydro 2000\nExisting Oil Combustion Turbine 400\nNew Plants \nNew Coal Steam 1000\nNew Oil Combustion Turbine 400","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"warning: Ensuring consistent units\nThe default units for capital costs in the Freedonia LEAP Area are US$/MW. They must be changed to 1000 US$/MW or to US$/kW, or the numbers in the table above must be multiplied by 1000 before entering them into LEAP. If this is not done, then the investment values passed to LEAP-Macro will appear (incorrectly) to be negligibly small.","category":"page"},{"location":"leap-exercise/#Running-LEAP-Macro","page":"LEAP exercise","title":"Running LEAP-Macro","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"LEAP-Macro can be run using a Visual Basic script that is provided with the sample files. Go into the LEAP Areas\\Freedonia\\Macro folder and open the LEAP Areas\\Freedonia\\Macro\\scripts folder. Copy the LEAPMacro_MacroModelCalc.vbs file from that folder into the main Freedonia LEAP area folder.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Before running the file, edit the configuration file LEAPMacro_params.yml to set the parameter run_leap to true:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"model:\n    # Set run_leap to \"false\" to do a single run of the Macro model without calling LEAP\n    run_leap: true\n    # Hide LEAP while running to (possibly) improve performance\n    hide_leap: false\n    # Maximum number of iterations before stopping (ignored if run_leap = false)\n    max_runs: 7\n    # Tolerance in percentage difference between values for indices between runs\n    max_tolerance: 1.0 # percent","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"If you copied the Visual Basic script correctly, then it should be accessible from the Advanced > Run Area Script menu. Select it and run it. You may need to give LEAP permission to run the script.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Running LEAP-Macro from LEAP)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"After a delay while the program loads, it will begin running the model. It may do multiple runs: (Image: LEAP-Macro running in the Windows Command Prompt)","category":"page"},{"location":"leap-exercise/#Examining-the-results","page":"LEAP exercise","title":"Examining the results","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Change to the Results view in LEAP, and look at the results for the Key\\GDP branch. They should now reflect the index calculated by the Macro model.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: GDP as calculated by LEAP-Macro)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"To get a better idea of how GDP is changing, click on “More…” and select “Growth Rates” rather than absolute values. The results show that the growth rate calculated by the Macro model starts high and then gradually declines. There is a slight drop after 2020, because the global GDP trajectory specified in the input files, which is a driver of export demand, takes into account the impact of COVID-19.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"The initial target growth rate in the configuration file was set to 6%/year, the same as the assumption in the original Freedonia model, and GDP growth stays near that level. However, due to internal model dynamics and some demand constraints, it stays below that level, and in fact declines less than 5%/year by the end of the scenario.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: GDP growth rate as calculated by LEAP-Macro)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Other results are passed to LEAP as well, including an index of industrial activity. To see it, go to the Results View and select the Demand\\Industry\\Iron and Steel branch. Change the displayed variable from Activity Level to Total Activity, and select “Absolute Values” instead of “Growth Rates” in the box above the chart. Next, click on the “Denominator…” button and select GDP. The results show that the Iron and Steel sector generally grows more slowly than GDP, reflected in the downward slope of the line.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Sector activity vs. GDP for Iron and Steel)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"tip: Detailed results from LEAP-Macro\nTo see more of the results, open the LEAP Areas\\Freedonia\\Macro folder under the Freedonia LEAP area. There you will find all of the output files produced by the Macro model.","category":"page"},{"location":"leap-exercise/#Changing-urbanization:-A-new-scenario","page":"LEAP exercise","title":"Changing urbanization: A new scenario","text":"","category":"section"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"With a few modifications, the LEAP-Macro model can be used to compare different scenarios. For this example, you will change the urbanization assumption in Freedonia. Urban households use electricity at a different rate than do rural households, so changing the urbanization assumption will change household electricity demand.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"To create the new scenario, go to the Scenarios screen in LEAP and create a new scenario below the Baseline scenario called “Urbanization”.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"(Image: Creating the \"Urbanization\" scenario)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Close the Scenarios screen, and change to the Urbanization scenario. Then, go to the Demand\\Household\\Urban branch and alter the expression in the Activity Level variable to read","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Interp(2040, 60)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"With this assumption, the urbanization rate will rise to 60% by the end of the scenario, rather than the Baseline value of 45%.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Next, make a copy of the configuration file and rename it to LEAPMacro_params_URB.yml. In the new file, make three changes:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"First, name a new output folder for this scenario, “Urbanization”:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"#---------------------------------------------------------------------------\n# Folder inside the \"outputs\" folder to store calibration, results, and diagnostics\n#---------------------------------------------------------------------------\noutput_folder: Urbanization","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Second, change the LEAP scenario to “Urbanization”:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"#---------------------------------------------------------------------------\n# Parameters for running LEAP with the Macro model (LEAP-Macro)\n#---------------------------------------------------------------------------\n# Core information for the LEAP application (optional)\nLEAP-info:\n    # The last historical year (equal to LEAP's First Scenario Year - 1): if missing, it is set equal to the start year\n    last_historical_year: 2010\n    # This can be, e.g., a baseline scenario (alternatively, can specify input_scenario and result_scenario separately)\n    scenario: Urbanization\n    # The region (if any -- can omit, or enter a \"~\", meaning no value)\n    region: ~","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Third, edit the LEAP-Macro-run.jl file that you will find in the Macro folder and add the lines below:","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"using LEAPMacro\n\ncurr_working_dir = pwd()\ncd(@__DIR__)\n\nprintln(\"Running Baseline...\")\nLEAPMacro.run()\n# Add these lines:\nprintln(\"\\nRunning Urbanization...\")\nLEAPMacro.run(\"LEAPMacro_params_URB.yml\")\n\ncd(curr_working_dir)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Then run the script again. It will go through both scenarios. (Image: LEAP-Macro running in the Windows Command Prompt)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"To see the effect of changed urbanization assumption, in the Results View, select the GDP variable (Key\\GDP), set the scenario selection to Urbanization, and set the comparison to “Differences vs. Baseline.” To see the year-on-year variation, change the default graph setting from “Every 2 years” to “All”: (Image: Changing graph settings to show all years)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Higher electricity demand leads to higher investment. Going to the Transformation\\Electricity Generation\\Processes branch, selecting the Investment Costs variable, and showing “Cumulative Values” shows how energy-related investment expenditure is higher over the Urbanization scenario than in the Baseline scenario. (Image: Investment costs: Urbanization vs. Baseline)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"Investment is a source of economic demand, and in this demand-led model, higher investment expenditure translates into higher GDP by the end of the scenario. That is not guaranteed – if the economy is operating at full potential, additional investment can “crowd out” other economic activity. But in this case, the investment has a stimulating effect.","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"That said, the differences are not large. Setting the denominator on the graph to “GDP” shows that the differences are less than a tenth of a percent of GDP. (Image: Difference between GDP in the Urbanization and Baseline scenarios as a fraction of GDP)","category":"page"},{"location":"leap-exercise/","page":"LEAP exercise","title":"LEAP exercise","text":"tip: Moving out of the testing stage\nOnce a model is running well, it is often useful to stop reporting diagnostics by setting the configuration file parameter diagnostics to false and to speed up calculations by setting the parameter hide_leap to true. Now the model is ready for regular use.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"config/#config","page":"Configuration file","title":"Configuration file","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The configuration file is written in YAML syntax and has a .yml extension. By default, Macro assumes the configuration file will be called LEAPMacro_params.yml, but other names are possible, and in fact encouraged, because each configuration file corresponds to a different scenario.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"tip: Online YAML checkers\nYAML is a widely-used language for representing data. As explained on the official YAML website, it is a \"human-friendly data serialization language for all programming languages.\" Because YAML is so widely used, many online tools are available. While LEAP-Macro will report an error if it finds a problem with your YAML script, the online syntax checkers are more user-friendly, including the YAML checker and the YAML validator.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The configuration file used as an example on this page is the LEAPMacro_params.yml file that is distributed with the demonstration files (see the Quick start page).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Pages = [\"config.md\"]\nDepth = 3","category":"page"},{"location":"config/#config-general-settings","page":"Configuration file","title":"General settings","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The configuration file is made up of several blocks. The first block names a subfolder for storing outputs. It will be created inside an outputs folder (see Output files). Different configuration files should specify different output folders so that scenarios can be distinguished.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Folder inside the \"outputs\" folder to store calibration, results, and diagnostics\n#---------------------------------------------------------------------------\noutput_folder: Baseline","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block sets the start and end years for the simulation. When running with LEAP, these should normally be the same as the base year and final year in LEAP, and the start year should be appropriate for the supply-use table. However, during model development, the start year might be set to an earlier value to calibrate against historical data.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Start and end years for the simulation\n#   Note: the supply-use table above must be appropriate for the start year\n#---------------------------------------------------------------------------\nyears:\n    start:  2010\n    end:    2040","category":"page"},{"location":"config/#config-required-input-files","page":"Configuration file","title":"Required input files","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block specifies the required external parameter files. Other, optional input files are described below. In many cases, the input files will be the same across a set of scenarios. However, it is possible that they might differ. For example, the supply-use table, given by the SUT parameter, could be drawn from different years for calibration purposes, and different time_series might distinguish different scenarios.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"This block also contains a flag saying whether the exchange rate time series, in the time_series file, is for the nominal or real exchange rate. This line can be omitted, in which case the default is for a nominal exchange rate. To specify a real exchange rate, set this equal to true.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Supply-use table and supplementary tables as CSV files\n#---------------------------------------------------------------------------\n# Macro model data files\nfiles:\n    SUT: Freedonia_SUT.csv\n    sector_info: sector_parameters.csv\n    product_info: product_parameters.csv\n    time_series: time_series.csv\n    xr-is-real: false","category":"page"},{"location":"config/#config-output-folders","page":"Configuration file","title":"Output folders","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The following block says how to manage the output folders.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Ordinarily it is useful to clear the folders with each run, since files will in any case be overwritten. But sometimes during model development it is useful to set clear-folders to false temporarily – for example, if only a few files need to be compared between one run to the next. To compare results from different runs, make a copy of output files of interest and set clear-folders to false, or copy the entire output file folder.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Reporting diagnostics is optional. It is highly recommended while developing a model, but report-diagnostics can be set to false for a model in active use.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"# Say whether to clear the contents of the results, calibration, and diagnostic folders before the run\nclear-folders:\n    results: true\n    calibration: true\n    diagnostics: true\n# Set to \"true\" to send results to the diagnostics folder, including dumps of the linear goal program\nreport-diagnostics: true","category":"page"},{"location":"config/#config-leap-run-settings","page":"Configuration file","title":"LEAP run settings","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block is optional, as are each of the individual entries. It has settings for running LEAP.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"To develop the Macro model independently of LEAP, set run_leap to false. This is the default value, and if it is set to false then the other parameters are unused.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"To reduce the time spent while running LEAP and Macro together, set hide_leap to true (the default is false).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The max_runs parameter can normally be set to 5 (the default value). In most models, convergence is reached after 2-3 iterations. However, it is better to be safe, so a higher value is used in the Freedonia model.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The max_tolerance is the maximum allowable percentage difference in Macro model outputs between runs. The tolerance can be tightened (a smaller value) or loosened (a larger value) depending on the needs of the analysis. The default value is 5.0%. That is easily achieved in the Freedonia example, so a tighter value is entered into the Freedonia configuration file.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"model:\n    # Set run_leap to \"false\" to do a single run of the Macro model without calling LEAP\n    run_leap: false\n    # Hide LEAP while running to (possibly) improve performance\n    hide_leap: false\n    # Maximum number of iterations before stopping (ignored if run_leap = false)\n    max_runs: 7\n    # Tolerance in percentage difference between values for indices between runs\n    max_tolerance: 1.0 # percent","category":"page"},{"location":"config/#config-optional-input-files","page":"Configuration file","title":"Optional input files","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block is optional, and can be entirely omitted. This block allows for additional exogenous time series that might be of interest in some studies. Any of them can be added or excluded individually. The allowed input files include:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"investment: A time series of exogenous investment demand beyond that simulated by the model (e.g., public investment)\npot_output: Potential output, which will override the value simulated by the model, where the entered values are converted to an index (e.g., agricultural production might be determined by an independent crop production model)\nmax_utilization: Maximum capacity utilization (e.g., if an exogenous constraint prevents operation at full capacity)\nreal_price: Real prices for tradeables; the entered values are converted to an index by Macro and multiplied by an index of inflation at the user-specified world inflation rate","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The format and purpose of these files are explained in more detail under external parameter files, and examples of each type of file are included in the sample Freedonia model.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Because this block is optional, it can be deleted entirely or commented out (as in the Freedonia configuration file). Alternatively, individual files can be commented out or set to \"~\", which is the way to signal a missing value in YAML.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Optional input files for exogenous time series (CSV files)\n#---------------------------------------------------------------------------\n# Uncomment the lines below to use the files included in the Freedonia sample model\n# For pot_output and max_utilization, include only those sectors where values are constrained -- the others will be unconstrained\n# For real_price:\n#   * Include only those products where values are specified -- for others the real price will be held constant\n#   * Prices for non-tradeables will be ignored; they are calculated internally by Macro\nexog-files:\n    # investment: exog_invest.csv # Time series of exogenous investment demand, additional to that simulated by the model\n    # pot_output: exog_pot_output.csv # Potential output (any units -- it is applied as an index): sectors label columns; years label rows\n    # max_utilization: exog_max_util.csv # Maximum capacity utilization: sectors label columns; years label rows (must lie between 0 and 1)\n    # real_price: exog_price.csv # Real prices for tradeables (any units -- it is applied as an index): products label columns; years label rows","category":"page"},{"location":"config/#config-model-params","page":"Configuration file","title":"Model parameters","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next several blocks contain some of the exogenous parameters for the Macro model that are not specified in the files identified in earlier blocks.","category":"page"},{"location":"config/#config-init-val-adj","page":"Configuration file","title":"Initial value adjustments","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The first block of model parameters is optional. It specifies adjustments to initial values. Each parameter defaults to 0.0.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"These parameters can be used to make a correction if, for example, the economy was recovering from a recession in the first year of the simulation. These parameters should normally be set to zero when starting a calibration (the default value).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Adjustment parameters for initializing variables\n#---------------------------------------------------------------------------\n# These factors are expressed as a fractional addition/subtraction to the estimate: set to zero to accept the default estimate\ncalib:\n    # Calibration factor for estimating the first-period profit rate and capital productivity\n    nextper_inv_adj_factor: 0.00\n    # Adjustment factor for maximum export demand in the initial year\n    max_export_adj_factor: 0.00\n    # Adjustment factor for maximum household demand in the initial year\n    max_hh_dmd_adj_factor: 0.00\n    # Potential output relative to actual output in the base year\n    pot_output_adj_factor: 0.05","category":"page"},{"location":"config/#config-global-econ","page":"Configuration file","title":"Default values for the global economy","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The second block of model parameters provides default values for the global inflation rate and growth rate of global GDP (or gross world product, GWP). These are applied if they are not specified for some year in the external time-series file. Also, the default global inflation rate is applied to price indices when initializing the model.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The correspondence between the parameters and the model variables is:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"infl_default : underlinepi_wk (applied uniformly to all products k, modified by the optional real_price file in the exog-files block)\ngr_default : underlinegamma^textworld","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Global economy parameters\n#---------------------------------------------------------------------------\nglobal-params:\n    # Default world inflation rate\n    infl_default: 0.02\n    # Default world growth rate\n    gr_default: 0.015","category":"page"},{"location":"config/#config-taylor-rule","page":"Configuration file","title":"Taylor rule coefficients","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block contains the parameters for implementing a \"Taylor rule\", which adjusts the central bank interest rate in response to inflation and economic growth. See the page on model dynamics for details.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The correspondence between the parameters and the model variables is:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"neutral_growth_band : hatunderlineY^*_textminhatunderlineY^*_textmax\ntarget_intrate :\ninit : underlinei^textinit_b0\nband : underlinei^textmin_b0underlinei^textmax_b0\nxr_sens : underlineb_textxr\nadj_time : underlineT_textxr\ntarget_infl : underlinepi^*\ninit_infl : underlinepi_d^textinit\ngr_resp : underlinerho_Y\ninfl_resp : underlinerho_pi","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for setting the central bank lending rate (Taylor rule)\n#---------------------------------------------------------------------------\ntaylor-fcn:\n    # Allowable range for neutral growth\n    neutral_growth_band: [0.02, 0.06]\n    # Target interest rate (as a fraction, e.g., 2%/year = 0.02)\n    target_intrate:\n        init: 0.04\n        band: [0.01, 0.10]\n        xr_sens: 1\n        adj_time: 2 # years\n    # Target inflation rate (if missing or if value set to \"~\", will use global inflation rate)\n    target_infl: 0.02\n    # Initial inflation rate for domestic prices (if missing, or if value set to \"~\", will use target inflation rate)\n    init_infl: 0.04\n    # Response of the central bank rate to a change in the GDP growth rate\n    gr_resp: 0.50\n    # Response of the central bank rate to a change in the inflation rate\n    infl_resp: 0.50","category":"page"},{"location":"config/#Investment-function-coefficients","page":"Configuration file","title":"Investment function coefficients","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block contains the parameters for the investment function. As explained in the page on model dynamics, the investment function calculates the demand for investment goods as a function of capacity utilization, profitability, borrowing costs, and (optionally) the current account-to-GDP ratio.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"info: The profit rate in the investment function\nPrior to version 2.2.8, the profit rate used in the investment function was calculated at full capacity utilization. However, this can lead to unexpected behavior. The default is now to use the profit rate calculated in terms of realized profits, taking capacity utilization into account. Because this change produces different results, an optional parameter, use_profits_at_full_capacity, can be set to true to revert to the prior behavior. This parameter can be omitted, and its default value is false.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The correspondence between the parameters and the model variables is:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"init_neutral_growth: Initial value of gamma_i0 (with the same initial value for every sector i)\nutil_sens : underlinealpha_textutil\nprofit_sens : underlinealpha_textprofit\nintrate_sens : underlinealpha_textbank\nnet_export : underlinealpha_textnetx\ngrowth_adj : underlinexi","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for the investment function\n#---------------------------------------------------------------------------\ninvestment-fcn:\n    # Starting point for the autonomous investment growth rate: also the initial target GDP growth rate for the Taylor rule\n    init_neutral_growth: 0.060\n    # Change in induced investment with a change in utilization\n    util_sens:  0.07\n    # Change in induced investment with a change in the profit rate\n    profit_sens: 0.05\n    # The profit rate is based on realized profits by default; leave blank or set to true for profits at full capacity utilization\n    use_profits_at_full_capacity: false\n    # Change in induced investment with a change in the central bank lending rate\n    intrate_sens: 0.20\n    # Change in induced investment with a change in the net export-to-GDP ratio\n    net_export: 0.00\n    # Rate of adjustment of the autonomous investment rate towards the actual investment rate\n    growth_adj: 0.10","category":"page"},{"location":"config/#config-empl-labprod-wage","page":"Configuration file","title":"Employment, labor productivity, and wages","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block contains default parameters for labor productivity (either a constant growth rate or in the form of the Kaldor-Verdoorn law) and for the function that determines the growth rate of the wage. See the technical documentation on labor productivity growth and wage determination for details.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"All parameters are optional. Their definitions are as follows:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"use_KV_model (default = true if KV_coeff_default or KV_intercept_default is defined, otherwise false) : A flag to say whether to use the Kaldor-Verdoorn model rather than constant labor productivity growth rates;\nuse_sector_params_if_available (default = true) : A flag to say whether to use sector-specific parameters if they are available (useful mainly to compare different specifications, otherwise it can be omitted);\nlabor_prod_gr_default (default = 0.0) : Default economy-wide labor productivity growth if not specified for some year (or if the column is omitted) in the external time-series file;\nKV_coeff_default (default = 0.5) : Default economy-wide labor productivity growth if not specified for some year (or if the column is omitted) in the external time-series file;\nKV_intercept_default (default = 0.0) : Default economy-wide labor productivity growth if not specified for some year (or if the column is omitted) in the external time-series file;\ninfl_passthrough (default = 1.0) : Degree of inflation pass-through (the default is full pass-through);\nlab_constr_coeff (default = 0.0) : Response of the wage level to labor constraints (the default is no response).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The correspondence between the parameters and the model variables is:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"For labor productivity:\nKV_coeff_default : underlinealpha^textKV\nKV_intercept_default : underlinebeta^textKV\nlabor_prod_gr_default : underlinebeta^textKV (with underlinealpha^textKV = 00)\nFor the wage:\ninfl_passthrough : underlineh\nlab_constr_coeff : underlinek","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for labor productivity, labor force, and wages\n#---------------------------------------------------------------------------\nlabor-prod-fcn:\n    # Flag for whether to apply Kaldor-Verdoorn model\n    use_KV_model: true\n    # Flag for whether to use sector parameters\n    use_sector_params_if_available: true\n    # Default labor productivity growth\n    labor_prod_gr_default: 0.025\n    # Default Kaldor-Verdoorn coefficient\n    KV_coeff_default: 0.500\n    # Default Kaldor-Verdoorn intercept\n    KV_intercept_default: 0.005\nwage-fcn:\n    # Inflation pass-through (wage indexing coefficient)\n    infl_passthrough: 1.00\n    # Labor supply constraint coefficient\n    lab_constr_coeff: 0.50","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"To simply use a fixed labor productivity growth rate, the following block will suffice:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for labor productivity, labor force, and wages\n#---------------------------------------------------------------------------\nlabor-prod-fcn:\n    # Default labor productivity growth\n    labor_prod_gr_default: 0.025\nwage-fcn:\n    ...","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Sector values will be used if they are specified, otherwise the time series values will be used. If time series values are not specified, then the default value will be applied.","category":"page"},{"location":"config/#config-intermed-dmd-change","page":"Configuration file","title":"Endogenous change in intermediate demand coefficients","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block is optional. If it is present, it sets parameters for endogenously determining intermediate demand coefficients. These parameters can optionally be set by sector in the sector parameters file","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Note that the calculation can generate unreasonably large rates of change in technical coefficients and can even create model instabilities. It is good practice to check the diagnostics folder for annual files labeled demand_coefficients_[year].csv to see whether the values are reasonable. If they are not, then adjust the parameters, either here or in the sector parameters file.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameter for rate of change in technical parameters\n#---------------------------------------------------------------------------\ntech-param-change:\n    # Flag to say whether to calculate changing technical parameters\n    calculate: false\n    # Flag for whether to use sector parameters\n    use_sector_params_if_available: true\n    # Rate constant: Note that if this is too large then it can create instabilities\n    rate_constant_default: 1.5 # 1/year\n    # Exponent in the technical change function\n    exponent_default: 2.0","category":"page"},{"location":"config/#config-longrun-demand-elast","page":"Configuration file","title":"Long-run demand elasticities","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Initial values for demand elasticities for products with respect to domestic vs. world prices, global GDP (for exports), and the wage bill (for domestic final demand excluding investment) are specified in the external product parameters file. The way that the elasticities enter into the model is described in the page on model dynamics.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"For products that are not labeled as \"Engel products\"[1] (given by the parameter engel-prods):","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"If the initial wage elasticity is less than one, then it remains at its starting level;\nIf the initial wage elasticity is greater than one, it asymptotically approaches a value of one over time;","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"For products labeled as Engel products:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The wage elasticity approaches the engel_asympt_elast over time.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The rate of convergence on the long-run values is given by the decay parameter, with the possibility of a different rate of convergence for exports and final demand.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Demand model parameters\n#---------------------------------------------------------------------------\n# For exports, with respect to world GDP\nexport_elast_demand:\n    decay: 0.01\n    \n# For final demand, with respect to the wage bill\nwage_elast_demand:\n    decay: 0.01\n    engel_prods: [p_agric, p_foodpr]\n    engel_asympt_elast: 0.7","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"[1]: Engel's Law states that as income rises, the proportion of income spent on food declines. That means that the income elasticity of expenditure on food is less than one.","category":"page"},{"location":"config/#config-lgp-weights","page":"Configuration file","title":"Linear goal program weights","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The Macro model solves a linear goal program for each year of the simulation. As described in the documentation for the linear goal program, the objective function contains weights, which are specified in the next block. The default weights should be suitable for most LEAP-Macro applications.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The correspondence between the parameters and the model variables is:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"For category weights:\nutilization : underlinew_u\nfinal_demand_cov : underlinew_F\nexports_cov : underlinew_X\nimports_cov : underlinew_M\nFor product and sector weights:\nutilization : underlinevarphi_u\nfinal_demand_cov : underlinevarphi_F\nexports_cov : underlinevarphi_X","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Paramters for implementing the (goal program) obective function\n#---------------------------------------------------------------------------\nobjective-fcn:\n    # Category weights on deviations from normal levels\n    category_weights:\n        utilization: 8.00\n        final_demand_cov: 4.00\n        exports_cov: 2.00\n        imports_cov: 1.00\n    # Product & sector weights are defined by: φ * value share + (1 - φ) * 1/number of sectors or products; this is φ\n    product_sector_weight_factors:\n        utilization: 0.5\n        final_demand_cov: 0.5\n        exports_cov: 0.5","category":"page"},{"location":"config/#config-sut","page":"Configuration file","title":"Linking to the supply-use table","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next block is for specifying the structure of the supply-use table and how it relates to variables in Macro.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The first section of this block specifies sectors and products that are excluded from the simulation. The entire section or any item can be excluded. Alternatively, items can be set to the empty list [] or to YAML's \"no value\" symbol, ~.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"There are three categories:","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"First, and most important, are energy sectors and products. Those are excluded from the Macro calculation because the energy sector analysis is handled on a physical basis within LEAP, although they can optionally be included when running the model in stand-alone mode, without LEAP.\nSecond are any territorial adjustments. Macro recalculates some parameters to take account of those entries. If none are present in the supply-use table, then an empty list [] can be entered for this parameter, as in the sample Freedonia model file shown below.\nFinally are any other excluded sectors and products. For example, some tables may have a \"fictitious\" product or sector entry.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Structure of the supply-use table\n#---------------------------------------------------------------------------\n# NOTE: Both supply and use tables must have sectors labeling columns and products labeling rows\nexcluded_sectors:\n    energy: [s_coal, s_petr, s_util]\n    territorial_adjustment: []\n    others: []\n\nexcluded_products:\n    energy: [p_coal, p_petr, p_util]\n    territorial_adjustment: []\n    others: []","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Following that is a list of non-tradeable products and a domestic production share threshold. Imports and exports of products declared non-tradeable are set to zero within the Macro model, if they are not already zero in the supply-use table, and are maintained at zero throughout the simulation.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Other products may be almost entirely imported. That can sometimes cause difficulties. If the domestic share of the total of imports and domestic production falls below the threshold specified in the configuration file, then the corresponding sector (but not the product) is excluded during the simulation.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"non_tradeable_products: [p_constr, p_comm]\n\n# Domestic production as a % share of the total of imports and domestic production must exceed this value\ndomestic_production_share_threshold: 1.0 # percent","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The following section specifies where to find the data needed by Macro within the supply-use table (a CSV file). Ranges are specified in standard spreadsheet form.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"SUT_ranges:\n    # Matrices arranged product (rows) x sector (columns)\n    supply_table: J3:W16\n    use_table: J21:W34\n    # Columns indexed by products -- groups of columns will be summed together\n    tot_supply: I3:I16\n    margins: D3:E16\n    taxes: F3:H16\n    imports: Y3:Y16\n    exports: Y21:Y34\n    final_demand: Z21:AB34\n    investment: AC21:AC34\n    stock_change: AD21:AD34\n    tot_intermediate_supply: X21:X34\n    # Rows indexed by sector -- groups of rows will be summed together\n    tot_intermediate_demand: J35:W35\n    wages: J37:W38","category":"page"},{"location":"config/#config-link-LEAP","page":"Configuration file","title":"Mapping Macro to LEAP","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next, and final, block specifies how LEAP and Macro are linked. Each of these entries is optional.","category":"page"},{"location":"config/#Core-LEAP-model-information","page":"Configuration file","title":"Core LEAP model information","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The first section in this block says which LEAP scenario to send and retrieve results to and from, and for which region. It also identifies the first historical year, if that is different from the start year. (The last_historical_year is the year just before LEAP's First Scenario Year.)","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"If this section is omitted, then results are sent to and retrieved from the scenario currently active in LEAP, and for the currently active region (if any regions are specified). The last_historical_year is set to the start year.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for running LEAP with the Macro model (LEAP-Macro)\n#---------------------------------------------------------------------------\n# Core information for the LEAP application (optional)\nLEAP-info:\n    # The last historical year (equal to LEAP's First Scenario Year - 1): if missing, it is set equal to the start year\n    last_historical_year: 2010\n    # This can be, e.g., a baseline scenario (alternatively, can specify input_scenario and result_scenario separately)\n    scenario: Baseline\n    # The region (if any -- can omit, or enter a \"~\", meaning no value)\n    region: ~","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Alternatively, separate scenarios can be specified if LEAP receives inputs from Macro for one scenario (input_scenario), but sends results back to Macro from another scenario (result_scenario). In this case, scenario should be omitted, or set to ~ (meaning \"no value\"). For example,","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"#---------------------------------------------------------------------------\n# Parameters for running LEAP with the Macro model (LEAP-Macro)\n#---------------------------------------------------------------------------\n# Core information for the LEAP application (optional)\nLEAP-info:\n    # The last historical year (equal to LEAP's First Scenario Year - 1): if missing, it is set equal to the the start year\n    last_historical_year: 2010\n    # Scenarios\n    input_scenario: Baseline\n    result_scenario: Capital Plan\n    ...","category":"page"},{"location":"config/#Pulling-investment-information-from-LEAP-into-Macro","page":"Configuration file","title":"Pulling investment information from LEAP into Macro","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next section specifies information regarding investment. By default, any investment reported in LEAP in a given year is totaled and passed to Macro with no adjustment: inv_costs_units is set to a blank (so LEAP applies the default currency unit), inv_costs_scale is set to 1.0, and inv_costs_apply_xr is set to false. However, some investment branches can be omitted, investment can be spread over several years, the currency unit can be set to a different value, the scaling factor can be specified, and the exchange rate can be applied.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"As an example for setting the scaling factor, if entries in the Macro model input files are in millions of US dollars, and investment costs in LEAP are reported in US dollars, then the scaling factor is one million (1000000 or 1.0e+6).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"If inv_costs_apply_xr is true, then the nominal exchange rate will be applied to the values from LEAP after scaling. In this calculation, the exchange rate will not be applied as an index: it is assumed that the value entered into the time series column exchange_rate is the actual nominal exchange rate. If that is not the case, then the scaling factor can be adjusted to ensure the correct units.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The excluded_branches entry is set to an empty list [] in the Freedonia example below. This entry is particularly useful if NEMO is run with a backstop technology. Any \"investment\" in the backstop technology represents a desired supply expansion that was not achieved, so the value should be ignored.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The Freedonia configuration file below shows different ways to specify how costs are spread over multiple years. If this entry is blank, then the default is that all expenditure occurs in one year. Otherwise, a default value can be set that is applied to all branches. Additionally, a value or pattern can be set for specific branches.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The distribution of costs over years can be set in one of two ways. If it is a single number (e.g., in example below, the default is 5 years), then total investment is divided equally across all of the years. If expenditure is set as a pattern, then it is specified as a list of values in brackets []. The values in the list are then rescaled by Macro so that they sum to one. The example below for New Oil Combustion Turbine sums to 100, so 10% of expenditure will be applied in the first year, 20% in the second, and so on.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"LEAP-investment:\n    # Currency units for investment costs\n    inv_costs_unit: U.S. Dollar\n    # Scaling factor for investment costs (values are divided by this number, e.g., for thousands use 1000 or 1.0e+3)\n    inv_costs_scale: 1.0e+6\n    # Say whether to apply the nominal exchange rate to investment costs (e.g., if investment costs are in USD, but the SUT is in domestic currency)\n    inv_costs_apply_xr: false\n    # Exclude any investment branches that contain any of the text in the list (case-insensitive)\n    excluded_branches: []\n    distribute_costs_over:\n        default: 5 # years: This will be rounded to an integer\n        by_branch:\n            - {\n                path: Transformation\\Electricity Generation\\Processes\\Existing Hydro,\n                value: 10 # years: This will be rounded to an integer\n            }\n            - {\n                path: Transformation\\Electricity Generation\\Processes\\New Oil Combustion Turbine,\n                value: [10, 20, 20, 20, 10, 10, 5, 5] # percent by years: This will be re-scaled so it sums to 1.0\n            }","category":"page"},{"location":"config/#config-indices-for-LEAP-Macro-link","page":"Configuration file","title":"Passing values from Macro to LEAP","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The next sections specify where in LEAP to put indices as calculated by Macro. For each index, LEAP should contain at least one historical value, while the index supplied by Macro is applied to the last historical value in the specified result_scenario. Indices appear as columns in an indices_#.csv file in the results output folder, where # is the run number.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The first index is for GDP. It can be omitted, but if it is present, the entry in the configuration file gives the name for the index, the LEAP branch and variable where the index should be inserted and, to cover cases where the last historical year is after the base year, the last historical year.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"# Association between Macro's GDP result and LEAP (optional)\nGDP-branch:\n    name: GDP\n    branch: Key\\GDP\n    variable: Activity Level","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The second index is also optional, and has the same structure as for GDP.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"# Association between Macro's employment result and LEAP (optional)\nEmployment-branch:\n    name: Employment\n    branch: Key\\Employment\n    variable: Activity Level","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Next, the association between Macro sectors and LEAP sectors is specified. These entries are also optional. They start with a specification of the economic driver for LEAP, either production (the default) or value added. Value added subtracts from the value of production the cost of intermediate goods and services, to avoid double-counting when calculating gross domestic product (GDP).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Production is a better variable to use when the corresponding variable in LEAP is a physical quantity. For example, in the Freedonia model, the activity level for the Iron and Steel sector is given as tonnes of steel. This driver can be set explicitly as PROD. However, in some LEAP models the activity level is value added. In that case, the default driver can be set to VA. The driving variable can be set by branch, as well, as shown in the LEAP-sectors example below.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"# Association between Macro sectors and LEAP sectors (optional)\nLEAP-drivers:\n    options:\n        PROD: production\n        VA: value added\n    default: PROD","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"the LEAP-sectors parameter, if present, contains a list of indices by sector. If no sectoral aggregation is desired, then this entry can be excluded entirely, set to ~ (meaning no value), or set to an empty list: LEAP-sectors: [].","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"For each index, Macro will sum up the driver (either production or value added) across all of the sector codes listed. It will then calculate an index starting in the base year, and insert the index into the specified branches. In some cases, the same index might be applied to different branches. For example, if the supply-use table has a \"services\" sector but no transport, while LEAP has both a services and a commercial transport sector, the same index could be used to drive both.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"In the example below, note that Iron and Steel and Other Industry do not have a branch-specific driver, so they use the default, PROD (production). The Commercial entry does have a branch-specific driver, which is set to VA (value added).","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"LEAP-sectors:\n - {\n    name: Iron and Steel,\n    codes: [s_ironstl],\n    branches: [\n        {\n         branch: Demand\\Industry\\Iron and Steel,\n         variable: Activity Level\n        }\n    ]\n   }\n - {\n    name: Other Industry,\n    codes: [s_foodpr, s_hvymach, s_othind],\n    branches: [\n        {\n         branch: Demand\\Industry\\Other Industry,\n         variable: Activity Level\n        }\n    ]\n   }\n   ...\n - {\n    name: Commercial,\n    codes: [s_comm, s_othsrv],\n    driver: VA,\n    branches: [\n        {\n         branch: Demand\\Commercial,\n         variable: Activity Level\n        }\n    ]\n   }\n","category":"page"},{"location":"config/#config-pass-vals-LEAP-to-Macro","page":"Configuration file","title":"Passing potential output and prices from LEAP to Macro","text":"","category":"section"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The final sections say how to pass results for potential output and prices from LEAP to Macro. These are in addition to investment expenditure, which is automatically collected from LEAP and passed to Macro. Any values for potential output and prices drawn from LEAP override those specified in external input files, if any. (Investment expenditure from LEAP is added to investment specified in external input files.)","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"The Freedonia configuration file does not specify potential output and prices from LEAP, so the entries are set equal to empty lists. Alternatively, they can be completely ommitted or set to the YAML \"no value\" symbol, ~.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"LEAP-potential-output: []\n\nLEAP-prices: []","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"To demonstrate how these sections might look, suppose that instead of excluding the coal sector as is done in the link to the supply-use table, above, it is included in the Macro model, but potential output from the sector is provided by LEAP. That can be accomplished by setting","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"excluded_sectors:\n    energy: [s_petr, s_util]\nexcluded_products:\n    energy: [p_petr, p_util]","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"and then adding an entry like","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"LEAP-potential-output:\n - {\n    branches: [\n        {\n         branch: Resources\\Primary\\Coal Bituminous,\n         variable: Indigenous Production\n        }\n    ],\n    code: s_coal\n   }","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Potential output is associated with a single sector in the Macro model, but can include values from multiple LEAP branches. If more than one LEAP branch is listed, then the values are summed together.","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"If the price of coal is available from the LEAP model, then it can be brought into Macro using an entry like","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"LEAP-prices:\n - {\n    branch: Resources\\Primary\\Coal Bituminous,\n    variable: Indigenous Cost,\n    codes: [p_coal]\n   }","category":"page"},{"location":"config/","page":"Configuration file","title":"Configuration file","text":"Prices are associated with a single LEAP branch, but can be applied to multiple products in Macro.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"pest-calib/#pest-calib","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Calibrating a Macro model can sometimes require very many iterations of running – changing parameters – rerunning – comparing results. When this is the case, it is best to take a systematic approach, but that adds the burden of keeping track of prior changes and results. Automated calibration can make the process much easier.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Starting with version 2.2.5, the LEAP-Macro demonstration files come with a Julia script called pest.jl that will run the freely-available third-party parameter estimation tool PEST. Together with its associated files pest_run_leapmacro.jl and pest_config.yml, the script first builds the input files needed by PEST and then, if PEST installed (see the PEST download page), it runs the PEST program.","category":"page"},{"location":"pest-calib/#About-PEST","page":"Calibrating with PEST","title":"About PEST","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"PEST was first written in 1994. Since then, it has been under continual development. It is widely used in environmental applications. From the PEST homepage,","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"“PEST” refers to a software package and to a suite of utility programs which supports it. Collectively, these are essential tools in decision-support environmental modelling.PEST, the software package, automates calibration, and calibration-constrained uncertainty analysis of any numerical model. It interacts with a model through the model’s own input and output files. While estimating or adjusting its parameters, it runs a model many times. These model runs can be conducted either in serial or in parallel. PEST records what it does in easily-understood output files.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The software suite supports and extends the core PEST functionality. The full PEST suite is quite powerful, but LEAP-Macro's pest.jl script uses only one tool in the suite, pestchek.exe, to check that the PEST input files are correctly prepared. It then runs the main program pest.exe in serial mode.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"As the description claims, PEST can work with an enormous variety of models by accommodating a wide range of input and output files. The only requirement is that they are text files. Beyond that, PEST can work with nearly any file format. Moreover, PEST has numerous options to overcome problems in specific models, or to take advantage of their features.","category":"page"},{"location":"pest-calib/#About-LEAP-Macro's-PEST-script","page":"Calibrating with PEST","title":"About LEAP-Macro's PEST script","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The practical consequence of PEST's flexibility is that its input files can be challenging to build, update, and modify for use in later projects. The pest.jl script makes the process much easier for LEAP-Macro applications. The configuration file for the pest.jl script, pest_config.yml, includes options specific to LEAP-Macro while offering a subset of the PEST options.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"tip: Editing the PEST input files\nThe pest.jl script offers options to change parameters in the Macro configuration file. However, it does not support changes to the external parameter files. For more complex calibration exercises, it is still recommended to run pest.jl to generate a starting set of PEST input files. You can then edit the files generated by pest.jl and run PEST by hand.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The pest.jl program has several command-line options. Each option has a default. The main options and their defaults are:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"usage: pest.jl [-p PEST_CONFIG_FILE] [-c CONTROL_FILE] [-h] [config_file]\n\npositional arguments:\n  config_file                               name of LEAP-Macro config file (default: \"LEAPMacro_params.yml\")\n\noptional arguments:\n  -p, --pest-config-file PEST_CONFIG_FILE   name of PEST config file (default: \"pest_config.yml\")\n  -c, --control-file CONTROL_FILE           name to assign the control file (default: \"LEAPMacro_control.pst\")\n  -h, --help                                show this help message and exit","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"In addition, several PEST control file parameters can be changed from their default values by specifying a new value when calling pest.jl. The command-line switches start with -- followed by the parameter name as given in the PEST documentation. With their default values, the changeable parameters are:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"  --RLAMBDA1    10.0\n  --RLAMFAC     2.0\n  --PHIRATSUF   0.3\n  --PHIREDLAM   0.03\n  --NUMLAM      10\n  --RELPARMAX   10.0\n  --FACPARMAX   10.0\n  --FACORIG     0.001\n  --PHIREDSWH   0.1\n  --PHIREDSTP   0.005\n  --NPHISTP     4\n  --NPHINORED   3\n  --RELPARSTP   0.005\n  --NRELPAR     4\n  --EIGTHRESH   5.0e-7\n  --DERINC      0.01\n  --DERINCLB    0.0\n  --DERINCMUL   2.0","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Below is part of the output from running the pest.jl script included in the LEAP-Macro demonstration files. The model is called 147 times, which would have taken a great deal of time if done by hand, and the optimum values for the parameters are chosen in a systematic way. Some points to note:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The PEST program must be downloaded from the PEST website and installed before the script can be run, and the script will issue an error and halt if pest.exe cannot be found;\nThe script builds three kinds of files: a template file (ending in .tpl), instruction files (ending in .ins), and a control file (ending in .pst);\nAs recorded in the Model command line: the PEST control file calls the script pest_run_leapmacro.jl, which runs the Macro model;\nThe model is run with a sysimage LEAPMacro-sysimage.so, which dramatically reduces the time it takes to load LEAP-Macro (see the Tip on \"Speeding up LEAPMacro with a pre-compiled system image\" in the page on running the Macro model);\nThe pestchek.exe program issues a warning, but that is not a problem: both PEST and the script allow output files to be used multiple times;\nInformation on the calibration is provided in files ending in .rec, .sen, .res, and .svd;\nPEST generates an error file ###error.par.1, but it recovers and tries other parameter values; if too many errors accumulate, PEST will halt and report the problem. In that case, looking at the ###error.par.N files can help pinpoint problematic combinations of parameter values.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"C:\\path\\to\\model> julia .\\pest.jl\nGenerating PEST template file...\nGenerating PEST instruction file(s)...\nGenerating PEST control file...\nChecking files...\n\nPESTCHEK Version 17.3. Watermark Numerical Computing.\n\nErrors ----->\nNo errors encountered.\n\nWarnings ----->\nModel output file collected_variables_0.csv read using more than one\n  instruction file.\nRunning PEST...\n\nPEST Version 17.3. Watermark Numerical Computing.\n\nPEST is running in parameter estimation mode.\n\nPEST run record: case leapmacro_control\n(See file leapmacro_control.rec for full details.)\n\nModel command line:\njulia --sysimage=LEAPMacro-sysimage.so pest_run_leapmacro.jl LEAPMacro_params_calib.yml -c -e -v -s 1 -d collected_variables_0.csv\n\nRunning model .....\n\n   Running model 1 time....Running LEAP-Macro...\nWith configuration file 'LEAPMacro_params_calib.yml' (including energy sectors):\nMacro model run (0)...completed\n\n   Sum of squared weighted residuals (ie phi)               =  5.32221E-03\n   Contribution to phi from observation group \"labgr\"       =  1.31664E-03\n   Contribution to phi from observation group \"gdpgr\"       =  4.00556E-03","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"...a few hundred lines omitted...","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"   No more lambdas: relative phi reduction between lambdas less than 0.0300\n   Lowest phi this iteration:  2.47742E-03\n   Maximum relative change: 0.6270     [\"intrate_sens\"]\n\n   Optimisation complete:   3 optimisation iterations have elapsed since lowest\n                          phi was achieved.\n   Total model calls:    147\n\nRunning model one last time with best parameters.....Running LEAP-Macro...\nWith configuration file 'LEAPMacro_params_calib.yml' (including energy sectors):\nMacro model run (0)...completed\n\n\nRecording run statistics .....\n\nSee file leapmacro_control.rec for full run details.\nSee file leapmacro_control.sen for parameter sensitivities.\nSee file leapmacro_control.seo for observation sensitivities.\nSee file leapmacro_control.res for residuals.\nSee file leapmacro_control.svd for history of SVD process.","category":"page"},{"location":"pest-calib/#The-pest_config.yml-file","page":"Calibrating with PEST","title":"The pest_config.yml file","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"All of the operation of the pest.jl script is controled from a configuration file. By default, it is called pest_config.yml. The configuration file has two main blocks, pest: and LEAP-Macro:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"pest:\n  program_path: \\path\\to\\pest\\program\n  ...\nLEAP-Macro:\n  output_folder: Calibration\n  ...","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The structure of each of the blocks can be illustrated using the example from the demonstration files. If PEST is installed, this script can be run from the command line using the Macro model distributed in the demonstration files.","category":"page"},{"location":"pest-calib/#The-pest:-block","page":"Calibrating with PEST","title":"The pest: block","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The pest: block starts with some basic settings. The program_path: should point to the folder where you have installed the PEST programs. The other settings can be changed if desired, but they are suitable for calibration runs.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"pest:\n  program_path: C:\\pest17\n  delimiter: \"|\"\n  precision: single # Can be \"single\" or \"double\"\n  allow_restart: true\n  max_iterations: 30 # Per parameter estimation run -- there can be many runs (see p. 78 in the PEST User Manual Part I for 0, -1, -2)","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The next sub-block, parameters: provides names, initial values, and ranges for the parameters that will be adjusted between runs of the model. Any name will do, as long as it consists of letters, digits, and underscores, and does not exceed 12 characters in length.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Values are entered as [minimum, initial, maximum]. Given the assumptions made by the pest.jl script, the initial value cannot be zero. It should also not be too small in comparison to the maximum value. If the initial value must be zero or very small, then the PEST control file generate by the pest.jl script (which will have a .pst extension) can be edited by hand.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"  # Assign names to parameters (12 characters maximum)\n  # Give values as [minimum, initial, maximum]\n  # NOTE: The initial value cannot be zero\n  parameters:\n    gamma_0: [0.040, 0.055, 0.100]\n    util_sens: [0.01, 0.05, 1.00]\n    profit_sens: [0.01, 0.10, 1.25]\n    intrate_sens: [0.01, 0.10, 1.25]\n    growth_adj: [0.01, 0.10, 1.25]\n    infl_pass: [0.6, 0.8, 1.0]\n    lab_ccoeff: [0.3, 0.6, 0.8]\n    pot_out_adj: [-0.05, 0.02, 0.05]\n    tech_par_adj: [0.02, 0.50, 1.00]","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The next sub-block, calibration:, specifies the years for the calibration run and observations to compare to the results. Some points to note:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The range given by calibration: => years: may exceed the years of observations, but all observations must lie within that range (e.g., in the sample configuration file, the initial year is 2010, while the first year of data is 2012);\nResults are assigned a name (e.g., GDPgr), which is case-insensitive: GDPgr is treated the same as gdpgr;\nEach result variable is taken from a single column in one of Macro's output files from the results folder.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Values are provided as [value, weight]. Weights can often be set to one, but there are exceptions:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"In the example below, the years 2020 and 2021 are outliers (because of COVID-19), so observations are given a low weight;\nIn the example below, it is presumed that there is a long-run growth target of 3.0%/year around 2035, so this value is entered and given a weight of 3;\nWhile the values in the example are growth rates, and hence around the same magnitude in any year, values that are growing over time can be down-weighted by an average growth index (not shown in the example).","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"  calibration:\n    years: [2010, 2040]\n    # For files, it is assumed that column 1 is the year\n    # Record observations as year: [value, weight]\n    # To omit an observation, set the weight to zero\n    results:\n      GDPgr:\n          filename: collected_variables_0.csv\n          column: 2\n          observations:\n            2012: [0.074, 1]\n            2013: [0.050, 1]\n            ...\n            2019: [0.058, 1]\n            2020: [-0.02, 0.1]\n            2021: [0.02, 0.1]\n            2035: [0.030, 3]\n      LABgr:\n          filename: collected_variables_0.csv\n          column: 7\n          observations:\n            2015: [0.018, 1]\n            2016: [0.023, 1]\n            ...\n            2019: [0.027, 1]\n            2020: [-0.017, 0.1]","category":"page"},{"location":"pest-calib/#The-LEAP-Macro:-block","page":"Calibrating with PEST","title":"The LEAP-Macro: block","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The LEAP-Macro: block contains information for running the Macro model. It starts with some general information, including the name for the output folder and commands for running Julia. Note that the entry for julia: => command:, which is the command for running the Julia program, has two important features. First, it assumes that Julia is on the Windows path, as specified by the PATH environment variable – if not, then the full path to the Julia executable should be provided. Second, it calls a sysimage. This is highly recommended, because it saves a great deal of running time: see the Tip on \"Speeding up LEAPMacro with a pre-compiled system image\" in the page on running the Macro model.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The julia: => resume_if_error: entry should be set to true if the calibration halts due to errors when running PEST. The control file generated by the pest.jl script stipulates that PEST should attempt to restart the calculation with different starting parameter values in case Macro encounters an error (through the lamforgive and  derforgive settings). However, if that is insufficient, setting resume_if_error: to true tells Macro to attempt to recover in case of an error. This is less satisfactory, because some output files will be incomplete, but may be more robust.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The julia: => verbose_errors: entry can be set to true to show where in the LEAP-Macro Julia code an error originated. It is useful for developers modifying the LEAP-Macro code, but less useful for standard LEAP-Macro applications.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The julia: => sleep: entry needs to be changed only if time lags from writing and reading files leads to collisions. These will sometimes show up as error messages about accessing files. If such messages appear, then the sleep time can be increased.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"LEAP-Macro:\n  output_folder: Calibration\n  julia:\n    # Note that script must accept thse flags:\n    # usage: pest_run_leapmacro.jl [-c] [-s SLEEP] [-d DATA_FILES [DATA_FILES...]] [-v] [-e] [-r] [-h] [config_file]\n    # positional arguments:\n    #   config_file                                 name of config file (default: \"LEAPMacro_params.yml\")\n    # optional arguments:\n    #   -c, --calibrate                             flag to do a calibration run\n    #   -s, --sleep SLEEP                           delay between iterations by this many seconds (default: 0.1)\n    #   -d, --data-files DATA_FILES [DATA_FILES...] name(s) of the data file(s) in the results folder\n    #   -v, --verbose-errors                        send detailed error message to log file\n    #   -e, --include-energy-sectors                include energy sectors in the model simulation\n    #   -r, --resume-if-error                       try to continue if the linear goal program returns an error\n    #   -h, --help                                  show the help message and exit\n    command: julia --sysimage=LEAPMacro-sysimage.so\n    script: pest_run_leapmacro.jl\n    resume_if_error: false\n    verbose_errors: false\n    sleep: 0.1 # seconds, to avoid collisions with opening & closing files ","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The next (and final) sub-block is called config:. Entries in the sub-block follow the structure of a LEAP-Macro configuration file. The pest.jl script takes a full LEAP-Macro configuration file as a starting point, appends _calibration to the name of the file and gives it a PEST template extension (.tpl). By default the starting configuration file is called LEAPMacro_params.yml, but it can be assigned a different file when running the pest.jl program by calling, e.g., \\path\\to\\model>julia pest.jl MyConfigFile.yml.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The PEST template file is exactly like the starting LEAP-Macro configuration file, with these changes:","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"It starts with a line reading ptf |, where \"|\" is the delimiter specified near the start of the pest: block;\nThe start and end years are given by the values specified in the pest: => calibration: block;\nAny numerical values specified in the config: block, below, replace the values in the starting configuration file;\nAny text labels, e.g., label_name, in the config: block, below, appear in the template as | label_name  |.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Where values are replaced, the original values are shown in a comment.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The text labels correspond to the names in the pest: => parameters: block described above. The pest.jl script generates an error if a label in the config: block has no corresponding entry in the pest: => parameters: block. The PEST program generates an error if an entry in the pest: => parameters: block does not appear in the template file.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"  config:\n    calib:\n      pot_output_adj_factor: pot_out_adj\n    taylor-fcn:\n      neutral_growth_band: [0.02, gamma_0]\n    investment-fcn:\n          init_neutral_growth: gamma_0\n          util_sens:  util_sens\n          profit_sens: profit_sens\n          intrate_sens: intrate_sens\n          growth_adj: growth_adj\n    wage-fcn:\n        infl_passthrough: infl_pass\n        lab_constr_coeff: lab_ccoeff\n    tech-param-change:\n        rate_constant: tech_par_adj","category":"page"},{"location":"pest-calib/#The-LEAP-Macro-configuration-file-generated-by-PEST","page":"Calibrating with PEST","title":"The LEAP-Macro configuration file generated by PEST","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"The PEST calibration procedure results in a calibrated LEAP-Macro configuration file. It will be named [starting_config_file]_calib.yml, where [starting_config_file].yml is the starting configuration file – by default, this will be LEAPMacro_params.yml. The final calibrated values will be assigned to parameters, with the original values from the starting configuration file stored in comments. Here is a selection from the file generated by the LEAP-Macro demonstration files: ","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"#---------------------------------------------------------------------------\n# Parameters for the investment function\n#---------------------------------------------------------------------------\ninvestment-fcn:\n    # Starting point for the autonomous investment growth rate: also the initial target GDP growth rate for the Taylor rule\n    init_neutral_growth:   6.3485615E-02 # 0.060\n    # Change in induced investment with a change in utilization\n    util_sens:   5.9571348E-02 # 0.07\n    # Change in induced investment with a change in the profit rate\n    profit_sens:   1.0000000E-02 # 0.05\n    # Change in induced investment with a change in the central bank lending rate\n    intrate_sens:   3.8500000E-01 # 0.20\n    # Rate of adjustment of the autonomous investment rate towards the actual investment rate\n    growth_adj:   1.2278759E+00 # 0.10","category":"page"},{"location":"pest-calib/#Final-comments","page":"Calibrating with PEST","title":"Final comments","text":"","category":"section"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Automated calibration can substantially speed up the calibration process. However, it is not a substitute for understanding the model. It is important to start calibrating by hand, to gain some intuition in how the Macro model responds to parameter changes.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"Even when running the pest.jl script, it may be necessary to make make multiple changes to the pest_config.yml file. If parameter estimates appear precisely at the minimum or maximum values specified in the configuration file, and if the minimum or maximum are not \"hard\" values determined by fundamentals, then the range should likely be expanded in order to find the optimum.","category":"page"},{"location":"pest-calib/","page":"Calibrating with PEST","title":"Calibrating with PEST","text":"In short, model calibration is challenging, even with a tool as powerful as PEST. But it can substantially shorten the process.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"prep-model/#prep-model","page":"Preparing a model","title":"Preparing a model","text":"","category":"section"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"Preparing a macroeconomic model is always complicated. The Macro model was built to reduce the complexities to some extent, but they cannot be entirely eliminated.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"tip: Using the PEST parameter estimation tool\nThe task of calibrating a Macro model can be made easier by calibrating with PEST, a parameter estimation tool. However, calibration cannot start until the some preliminary steps are carried out. It is a good idea to read this page in its entirety before considering PEST as an option.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"Here are some proposed steps. It is best to start with an existing configuration file, for example the one from the Freedonia sample model:","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"Prepare the supply-use table;\nEstimate or assume external parameters;\nSet the report-diagnostics value to true in the configuration file;\nSet the run_leap value to false in the configuration file general settings;\nSet the initial value adjustments to zero;\nSet the start and end years appropriately (see below) in the configuration file general settings;\nRun the model by calling LEAPMacro.run(CONFIG_FILE, include_energy_sectors = true), where CONFIG_FILE is the name of your configuration file;\nCheck the LEAPMacro_log_XXXX_full.txt log file[1], where XXXX is the name of the output_folder setting in the configuration file general settings, to check that the model ran without errors;\nIf there were errors, troubleshoot using the diagnostics files;\nConfirm that the reported value in the nonenergy_energy_link_measure.txt file in the diagnostics folder is reasonably small (see the Tip at the end of this page for what to do if it is large);\nOnce the model is running without errors, calibrate by adjusting model parameters systematically in the configuration file;\nIf needed, adjust initial values to fine-tune the calibration and, optionally, further adjust the model parameters.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"[1]: The log file and output folder names have _full added at the end because the call to LEAPMacro.run() included energy sectors: see the page on Output files.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"tip: What is an appropriate range of years?\nWhen calibrating, the start and end years for the simulation should:Include all of the years for which there is data;\nExtend far enough in the future to ensure the parameter set does not create instabilities.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"tip: Carry out sanity checks\nWhen calibrating, note the \"sanity checks\" listed in the page on output files. Note that a failed sanity check could be because of how the LEAP-Macro files are set up, such as the configuration file, supply-use table, or output files. For example, the configuration file might point to the wrong rows and columns in the supply-use table. But it could also be because there is a problem with the data. For example, an incorrectly prepared supply-use table can generate strange results.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"To link to LEAP:","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"Set the list of excluded energy sectors to ones relevant to the analysis;\nEnsure that the link between the Macro model and LEAP is set correctly in the configuration file;\nSet run_leap to true in the configuration file general settings;\nSee the guidelines for running the Macro model to place the files and scripts correctly;\nRun the Macro model from LEAP.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"tip: Follow the LEAP-Macro tutorial\nIt is a good idea to follow the LEAP tutorial for running LEAP-Macro. It explains where to place the files and how to set up multiple scenario runs.","category":"page"},{"location":"prep-model/","page":"Preparing a model","title":"Preparing a model","text":"tip: What to do if the non-energy - energy link measure is large\nThe reported value in the nonenergy_energy_link_measure.txt file saved in the diagnostics folder is a measure of how important the energy sector is as a source of demand for non-energy goods and services. A key assumption of LEAP-Macro is that the energy sector is not an important source of non-energy demand: see Isolating the energy sector. That is a reasonable assumption if the non-energy–energy link measure is a few percent at most. However, even if the value is large, it may be possible to apply LEAP-Macro. An example is given in the documentation for the configuration file, where the energy sector coal is included in Macro's calculations, but potential production is taken from LEAP. That way, demand by the coal sector for non-energy products are calculated by Macro, but the level of activity in the coal sector is provided by LEAP.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"params/#params","page":"External parameter files","title":"External parameter files","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"External parameters that are specified for all products, all sectors, or over time, are supplied in three comma-separated variable (CSV) files in the inputs folder. The files provided with the Freedonia sample model have the names product_parameters.csv, sector_parameters.csv, and time_series.csv. However, the names are set in the configuration file's general settings. That means that different external parameter files can be used for different scenarios.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The other files in the Freedonia sample model input folder include the supply-use table, which is described on a separate page, and some optional input files, which are described below.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"info: Comma-separated variable (CSV) files\nCSV-formatted files are plain text files that can be viewed in a text editor. They can also be opened and modified in Excel, Google Sheets, or other spreadsheet program, which is a convenient way to edit them. ","category":"page"},{"location":"params/#params-products","page":"External parameter files","title":"Product parameters","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The product parameters file has the structure shown below. There are as many rows in the table as there are products.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The first two columns are the product codes and product names. These should be in the same order as the products in the supply-use tables.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The next two columns provide the initial income elasticities of demand[1] for exports (with respect to global GDP) and domestic final consumption (with respect to total wages). These elasticities change over time, as determined by additional parameters in the configuration file.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The final two columns are bracketed because they are optional. They specify how imports and exports respond to relative changes between domestic and world prices. If the columns are not present, these elasticities are set to zero by default, meaning no price sensitivity.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"For more information on how Macro uses the elasticities, see the detailed explanation of export demand, final domestic demand and imports.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Elasticities can be estimated from historical data, although that requires knowledge of statistical methods. Otherwise, they can be drawn from published studies or from already existing economic models.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"code name export_elast_demand0 wage_elast_demand0 [import_price_elast] [export_price_elast]\nCODE1 Name1 xe_1 we_1 [mpe_1] [xpe_1]\nCODE2 Name2 xe_2 we_2 [mpe_2] [xpe_2]\n... ... ... ... ... ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The corresponding variables are:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"export_elast_demand0 : the initial value for underlineeta^textexp_k for product k\nwage_elast_demand0 : the initial value for underlineeta^textwage_k for product k\nimport_price_elast : underlinephi^textimp_k for product k\nexport_price_elast : underlinephi^textexport_k for product k","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Here is the example from the Freedonia sample model: (Image: Freedonia product_parameters file)","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"[1]: The income elasticity of demand and price elasticity of demand are measures of the responsiveness of demand for a good or service with respect to changes in income or price.","category":"page"},{"location":"params/#params-sectors","page":"External parameter files","title":"Sector parameters","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The structure of the sector parameters file is shown below. There are as many rows in the table as there are sectors.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The first two columns are the sector codes and sector names. These should be in the same order as the sectors in the supply-use tables.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"In addition to the sector codes and names, this file contains a single required parameter for each sector, the depreciation rate. Where available, this can be calculated from national statistics. Otherwise, the delta parameter reported for the whole economy in the Penn World Table can be applied to each sector.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The file also includes several optional parameters, shown in brackets, which determine labor productivity growth and changes in intermediate demand coefficients at sector level. The productivity parameters might be assumed to be the same across sectors, estimated from historical data, or drawn from published studies. If values are the same across sectors, then they can be specified as default values in the configuration file and the corresponding columns can be omitted from this file.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"code name depr_rate [KV_coeff] [KV_intercept] [labor_prod_gr] [empl0] [rate_const] [exponent]\nCODE1 Name 1 dr_1 [kvc_1] [kvi_1] [lpgr_1] [empl0_1] [rc_1] [exp_1]\nCODE2 Name 2 dr_2 [kvc_2] [kvi_2] [lpgr_2] [empl0_2] [rc_2] [exp_2]\n... ... ... ... ... ... ... ... ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The corresponding variables for sector i are:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"depr_rate : underlinedelta_i\nKV_coeff : underlinealpha^textKV_i\nKV_intercept : underlinebeta^textKV_i\nempl0 : underlineL_i0\nlabor_prod_gr : underlinebeta^textKV_i (with underlinealpha^textKV_i = 0)\nrate_const : underlinea_i (an optional parameter)\nexponent : underlinevartheta_i (an optional parameter)","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Here is the example from the Freedonia sample model: (Image: Freedonia sector_parameters file)","category":"page"},{"location":"params/#params-time-series","page":"External parameter files","title":"Time series","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The structure of the time series file is shown below. It contains several parameters: the world growth rate, the world inflation rate, the growth rate of the working-age population, the exchange rate, and parameters for the labor productivity calculation.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Only the working_age_gr column is required – each of the others is optional, so they are bracketed.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"If either the world_gr or world_infl_rate columns are missing, then the corresponding default value from the configuration file is applied for all years;\nIf the exchange_rate column is missing, then it defaults to a constant exchange rate;\nIf any of the KV_coeff, KV_intercept, or labor_prod_gr columns is missing, then the corresponding default value from the configuration file is applied for all years.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"info: Exchange rates and supply-use tables\nSupply-use tables have entries that are all in the same currency, usually but not always the national (domestic) currency. Exchange rates express the domestic currency in terms of a foreign currency, such as the US dollar, the Euro, the Yen, or a mixture of currencies (a currency \"basket\"). In Macro, exchange rates are converted into an index to ensure consistent currency units.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Scenarios for the world economic growth rate can be drawn from other studies, such as the Shared Socioeconomic Pathways (SSP) database. The working age growth rate can be calculated from national projections or the UN Population Prospects database.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Other parameters have less well-established sources of estimates. The labor productivity parameters (the Kaldor-Verdoorn parameters KV_coeff and KV_intercept or the labor productivity growth rate labor_prod_gr) might be assumed constant, estimated from historical data, or drawn from published studies. If they are constant, then they can be omitted from this table and specified as default values in the configuration file. Assumptions regarding the world inflation rate and the exchange rate can be based on historical patterns, other modeling studies, or consultation with experts.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"year [world_gr] [world_infl_rate] working_age_gr [exchange_rate] [KV_coeff] [KV_intercept] [labor_prod_gr]\ny_1 [wgr_1] [wir_1] wagr_1 [xr_1] [kvc_1] [kvi_1] [lpgr_1]\ny_2 [wgr_2] [wir_2] wagr_2 [xr_2] [kvc_2] [kvi_2] [lpgr_2]\n... ... ... ... ... ... ... ...\ny_N [wgr_N] [wir_N] wagr_N [xr_N] [kvc_N] [kvi_N] [lpgr_N]","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The corresponding variables are:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"world_gr : underlinegamma^textworld\nworld_infl_rate : underlinepi_wk (applied uniformly to all products k, but modified by an optional file specifying world real price trends for selected tradeables)\nworking_age_gr : underlinehatN\nexchange_rate : underlinee\nKV_coeff : underlinealpha^textKV\nKV_intercept : underlinebeta^textKV\nlabor_prod_gr : underlinebeta^textKV (with underlinealpha^textKV = 0)","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Here is the example from the Freedonia sample model: (Image: Freedonia time_series file)","category":"page"},{"location":"params/#params-optional-input-files","page":"External parameter files","title":"Optional input files","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"External inputs for investment, potential output, and prices can be supplied from LEAP. Investment expenditure is collected automatically, while potential output and prices can be specified in the configuration file. Additionally, for non-energy sectors, it is possible to specify any or all of four optional input files for: investment demand; potential output; maximum capacity utilization; and real prices for tradeables.","category":"page"},{"location":"params/#params-optional-exog-investment","page":"External parameter files","title":"Investment demand","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The Macro model calculates investment for non-energy sectors based on expected demand and profitability: see the explanation of potential output in the Technical Details. However, for public infrastructure investment – which is driven by policy goals, rather than private profitability, and where the capital stock is not associated with a particular sector – investment must be specified exogenously. (When externally specified investment is associated with a particular sector, it is better to specify potential output: see below.)","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The investment demand parameter file has the following structure:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"year addl_investment\ny_1 inv_1\ny_2 inv_2\n... ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Note that not all years need to be included. For example, if there is investment expenditure in 2025, but not in 2026, then the year 2026 does not have to be included in the file. The values are in \"real\" monetary terms, and are used directly by Macro, so the units should be the same as those for the supply and use tables.","category":"page"},{"location":"params/#params-optional-pot-output","page":"External parameter files","title":"Potential output","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"In the Macro model, potential output is determined by investment: see potential output in the Technical Details. In some cases, it is best to override this behavior. For example, output from agriculture might be determined by an external crop model, or the output from the mining sector might be constrained by the availability of the ore. In other cases, the production level might be set as a policy target or through a sector-specific planning document. In these cases, potential output can be specified for specific sectors, and Macro will calculate investment.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The potential output parameter file has the following structure:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"year sec_1 sec_2 ...\ny_1 potout_s1y1 potout_s2y1 ...\ny_2 potout_s1y2 potout_s2y2 ...\n... ... ... ...\ny_N potout_s1yN potout_s2yN ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The sequence of values is converted internally into an index. For this reason, values must be specified for all years. However, values should be specified only for sectors with exogenous potential output. Other sectors, where Macro simulates the change in potential output, should not appear in this file.","category":"page"},{"location":"params/#params-optional-max-utilization","page":"External parameter files","title":"Maximum capacity utilization","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"Capacity utilization in the Macro model is determined in each time step by solving a linear goal program. By default, maximum capacity utilization is equal to 1.0. However, in some cases, capacity utilization might be constrained. For example, during a disease outbreak, some service sector activities may be limited, and during a drought, manufacturing plants that rely on cooling or process water might have to curtail production. In these cases, a maximum level of capacity utilization less than one can be specified exogenously.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The maximum capacity utilization file has the following structure:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"year sec_1 sec_2 ...\ny_1 umax_s1y1 umax_s2y1 ...\ny_2 umax_s1y2  ...\ny_3 umax_s1y3 umax_s2y3 ...\n... ... ... ...\ny_N umax_s1yN umax_s2yN ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"In the file, all years must be listed. However, values do not have to specified for all years. If capacity utilization is unconstrained in some year, the maximum level can be omitted, and Macro will set it equal to 1.0. An example of this is shown in cell (y_2,sec_2) in the table above. ","category":"page"},{"location":"params/#params-optional-price-trend","page":"External parameter files","title":"World real price trends for selected tradeables","text":"","category":"section"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"In the Macro model, \"world\" prices for goods and services are specified exogenously, while domestic prices are calculated as a markup on costs. By default, world prices for all tradeables grow at a uniform, user-specified world inflation rate. However, optionally, real world price indices for all or some tradeables can be specified. The real price trend is then adjusted for inflation at the world inflation rate.","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The real price file has the following structure:","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"year prod_1 prod_2 ...\ny_1 pw_p1y1 pw_p2y1 ...\ny_2 pw_p1y2 pw_p2y2 ...\ny_3 pw_p1y3 pw_p2y3 ...\n... ... ... ...\ny_N pw_p1yN pw_p2yN ...","category":"page"},{"location":"params/","page":"External parameter files","title":"External parameter files","text":"The sequence of values is converted internally into an index. For this reason, values must be specified for all years. However, values should be specified only for products for which a real price index is specified. For other products, the real world price is assumed to be constant, so the nominal price rises at the world inflation rate. Price indices for non-tradeables are ignored, because the world price is irrelevant; together with other domestic prices, Macro calculates prices of non-tradeables endogenously based on a markup. ","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"lgp/#lgp","page":"Linear goal program","title":"Linear goal program","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"For the list of variables, their symbols, and their definitions, see the Variables page.","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"The Macro model solves, in each year, a linear goal program (LGP) that seeks the following, potentially competing, objectives:","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"Full utilization\nMeeting or exceeding a \"normal\" level of final demand\nMeeting or exceeding normal export demand\nMinimizing the gap between normal and realized imports","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"As with any goal program, the individual objectives are expressed in terms of a gap between a target level and the modeled level. The objective function is a weighted sum of the separate objectives:","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"min underlinew_usum_i = 1^n_s underlinesigma^u_iDelta u_i +\n     underlinew_Xsum_k = 1^n_p underlinesigma^K_kDelta s_Xk +\n     underlinew_Fsum_k = 1^n_p underlinesigma^F_kDelta s_Fk +\n     underlinew_Msum_k = 1^n_p left(psi^+_k + psi^-_kright)","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"All goal variables are scaled so that they take values between zero and one.","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"note: Sector and product specific weights vs. category weights\nIn the objective function, there are four \"category weights\", underlinew_u, underlinew_X, underlinew_F, and underlinew_M. The category weights are specified in the configuration file.In addition, there are sector or product-specific weights for for utilization, exports, and final demand, but not for imports. The reason is that while weights are needed to capture the relative importance of certain goods in output, the export basket, and household final demand, import flexibility simply allows for demand to be met when domestic production is insufficient, a consideration that does not privilege one product over another.The sector or product weights are given as weighted average of two possible weighting schemes: the base-year shares of the different sectors or products in output (for utilization), exports, or final demand, or equal weights. The allocations between the two possible weighting schemes are specified by the product and sector weight parameters underlinevarphi_u, underlinevarphi_X, and underlinevarphi_F, which are also set in the configuration file.","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"When the report-diagnostics parameter is set to true in the configuration file, Macro will export the structure of the LGP for each year to the diagnostics folder in a set of files with names like model_0_yyyy.txt. The output looks something like this:","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"Min 1.7333333333333334 ugap[1] + 0.5333333333333333 ugap[2] + 0.6000000000000001 ugap[3] + ...\nSubject to\n eq_util[1] : ugap[1] + u[1] == 1.0\n eq_util[2] : ugap[2] + u[2] == 1.0\n eq_util[3] : ugap[3] + u[3] == 1.0\n eq_util[4] : ugap[4] + u[4] == 1.0\n...","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"Each equation in the file is labeled, for example by eq_util. For reference, the label is provided for each equation listed below, along with a motivation and a mathematical expression.","category":"page"},{"location":"lgp/#Domestic-goods-market-equilibrium","page":"Linear goal program","title":"Domestic goods market equilibrium","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_totsupply: Equilibrium in the domestic goods market is met when domestic supply equals total demand (the sum of final demand and demand for intermediate goods, exports, and investment goods), net of imports, and corrected by margins. This is enforced by the condition","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"q_sk = q_dk - m^+_k + m^-_k + X_k + F_k + I_k - M_k","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_no_dom_prod: If the country does not produce a particular product k, then q_sk must equal zero. This is enforced by the condition","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"q_skunderlined_k = 0","category":"page"},{"location":"lgp/#Supply-of-intermediate-goods","page":"Linear goal program","title":"Supply of intermediate goods","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_intdmd: Intermediate goods are required for production and are given by technical coefficients (calculated from the use table and possibly updated dynamically). Intermediate demand is determined by","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"q_dk - sum_i = 1^n_s overlineD_kioverlinez_i u_i = 0","category":"page"},{"location":"lgp/#Capacity-utilization","page":"Linear goal program","title":"Capacity utilization","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_io: A core equation determines capacity utilization. It states that the value of domestic supply equals the value of domestic production:","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"sum_k=1^n_p underlineS_ik overlinep_bkq_sk - overlineP_goverlinez_i u_i = 0","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_util: Deviations in utilization for sector i below the target value of u_i = underlineu_i^textmax are penalized in the goal program. (Note that underlineu_i^textmax = 1 unless it is set exogenously. See optional exogenous parameters and the format for the maximum capacity utilization file.) The deviation variable is calculated by imposing the condition","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"u_i + Delta u_i = underlineu_i^textmaxquad 0 leq u_iDelta u_i leq 1","category":"page"},{"location":"lgp/#lgp-investment-goods-allocation","page":"Linear goal program","title":"Investment goods allocation","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_inv_supply: Total investment demand overlineI is supplied by a variety of sectors with shares theta_k. This is enforced by the condition","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"I_k = underlinetheta_k overlineI","category":"page"},{"location":"lgp/#Final-demand","page":"Linear goal program","title":"Final demand","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_F: Final demand is expressed as a multiple of the normal level,","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"F_k = s_Fk overlineF^textnorm_k","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_fshare: The multiplier satsifies","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"s_Fk + Delta s_Fk = 1 quad 0leq s_Fk Delta s_Fk leq 1","category":"page"},{"location":"lgp/#Trade","page":"Linear goal program","title":"Trade","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_X: As with final demand, exports are expressed as a multiple of the normal level,","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"X_k = s_Xk overlineX^textnorm_k","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_xshare: The multiplier satsifies","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"s_Xk + Delta s_Xk = 1 quad 0leq s_Xk Delta s_Xk leq 1","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_M: Imports are given by a multiplier applied to total domestic demand, plus a possible deviation:","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"M_k = overlinef_kleft(q_dk + F_k + I_kright) + left(psi^+_k - psi^-_kright) overlineM^textref_k","category":"page"},{"location":"lgp/#Margins","page":"Linear goal program","title":"Margins","text":"","category":"section"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_margpos: Positive margins are a fraction of total supply (domestic plus imports),","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"m^+_k = underlinechi^+_k left(q_sk + M_kright)","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"eq_margneg: Margins are allocated across products that correspond to the supply of those goods,","category":"page"},{"location":"lgp/","page":"Linear goal program","title":"Linear goal program","text":"m^-_k = underlinechi^-_k sum_l = 1^n_p m^+_l","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"running-macro/#running-macro","page":"Running the Macro model","title":"Running the Macro model","text":"","category":"section"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"Once the configuration and external parameter files have been prepared, the Macro model can be run in a stand-alone mode without LEAP. If the LEAP model is also prepared, then Macro can be run from LEAP.","category":"page"},{"location":"running-macro/#Running-Macro-stand-alone","page":"Running the Macro model","title":"Running Macro stand-alone","text":"","category":"section"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"When running Macro multiple times – for example, when calibrating – it is best to work in Julia's command-line read-eval-print loop (the REPL). That way, the LEAPMacro library is only included once, which speeds up subsequent runs. Alternatively, Macro can be run stand-alone from the Windows Command Prompt, as explained below.","category":"page"},{"location":"running-macro/#Running-from-Julia's-REPL","page":"Running the Macro model","title":"Running from Julia's REPL","text":"","category":"section"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"The only command needed is LEAPMacro.run(), which is defined as follows, with the default values indicated:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"function run(config_file::AbstractString = \"LEAPMacro_params.yml\";\n             dump_err_stack::Bool = false,\n             include_energy_sectors::Bool = false,\n             load_leap_first::Bool = false,\n             get_results_from_leap_version::Union{Nothing,Integer,AbstractString} = nothing,\n             only_push_leap_results::Bool = false,\n             run_number_start::Integer = 0,\n             continue_if_error::Bool = false)","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"The options are:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"config_file: The name of the configuration file, if it is not LEAPMacro_params.yml;\ndump_err_stack: Report detailed information about an error in the log file (useful when debugging the Macro code, but not much use when debugging a model);\ninclude_energy_sectors: Run the model with the energy sectors included (only useful in standalone mode, without LEAP, particularly when calibrating);\nload_leap_first: Pull results from LEAP before running Macro (useful when LEAP has already been run and results are available);\nget_results_from_leap_version: Specify the LEAP version, either by comment or number, from which to pull initial results (ignored if load_leap_first = false);\nonly_push_leap_results: Run Macro and push results to LEAP, but do not run LEAP;\nrun_number_start: Specify the first run number to use (default is 0);\ncontinue_if_error: Try to continue if the linear goal program returns an error.","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"info: When to use `continue_if_error`\nThe continue_if_error flag should ordinarily be set to false. When there is an error, the results cannot be trusted, and some reported outputs and all LEAP indices are set to NaN (Not a Number). Nevertheless, it has some use. It is most useful when running LEAP-Macro many times using different inputs; for example, during an automated calibration or when running an ensemble of LEAP scenarios. In that case, setting the flag to true may enable calculations to proceed even if one particular run gives an error. However, there is a chance that the program will halt anyway, if the error is too severe to recover from.","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"For example, each of the following is a valid call to the run() function:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"LEAPMacro.run()\nLEAPMacro.run(\"LEAPMacro_params_MyScenario.yml\")\nLEAPMacro.run(dump_err_stack = true)\nLEAPMacro.run(\"LEAPMacro_params_Calibration.yml\", include_energy_sectors = true)","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"If the config_file argument is not specified, then it is set equal to LEAPMacro_params.yml. If that is the name of the configuration file, then after installing the LEAP-Macro package, the model can be run by simply typing the following commands in the Julia REPL:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"julia> import LEAPMacro\n\njulia> LEAPMacro.run()\nWith configuration file 'LEAPMacro_params.yml':\nMacro model run (0)...completed\n0","category":"page"},{"location":"running-macro/#Running-from-the-Windows-Command-Prompt","page":"Running the Macro model","title":"Running from the Windows Command Prompt","text":"","category":"section"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"In some circumstances it can be helpful to specify options as command-line parameters and run Macro from the Windows Command Prompt. The ArgParse Julia package makes that relatively easy. Here is a sample script, which can be saved as runleapmacro.jl:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"# script 'runleapmacro.jl'\nusing LEAPMacro\nusing ArgParse\n\nfunction parse_commandline()\n    argp = ArgParseSettings(autofix_names = true)\n    @add_arg_table! argp begin\n        \"config-file\"\n            help = \"name of the configuration file\"\n            arg_type = AbstractString\n            default = \"LEAPMacro_params.yml\"\n            required = false\n        \"--verbose-errors\", \"-v\"\n            help = \"send detailed error message to log file\"\n            action = :store_true\n        \"--load-leap-first\", \"-l\"\n            help = \"load results from LEAP before running Macro\"\n            action = :store_true\n        \"--use-leap-version\", \"-u\"\n            help = \"If load-leap-first is set, pull results from this version\"\n        \"--only-push-leap-results\", \"-p\"\n            help = \"only push results to LEAP and do not run LEAP from Macro\"\n            action = :store_true\n        \"--init-run-number\", \"-r\"\n            help = \"initial run number\"\n            arg_type = Int64\n            default = 0\n        \"--include-energy-sectors\", \"-e\"\n            help = \"include energy sectors in the model simulation\"\n            action = :store_true\n        \"--continue-if-error\", \"-c\"\n            help = \"try to continue if the linear goal program returns an error\"\n            action = :store_true\n    end\n\n    return parse_args(argp)\nend\n\nparsed_args = parse_commandline()\n\nLEAPMacro.run(parsed_args[\"config_file\"],\n              dump_err_stack = parsed_args[\"verbose_errors\"],\n              load_leap_first = parsed_args[\"load_leap_first\"],\n              get_results_from_leap_version = parsed_args[\"use_leap_version\"], \n              only_push_leap_results = parsed_args[\"only_push_leap_results\"],\n              run_number_start = parsed_args[\"init_run_number\"],\n              include_energy_sectors = parsed_args[\"include_energy_sectors\"],\n              continue_if_error = parsed_args[\"continue_if_error\"])","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"For example, if the configuration file as the the default filename, LEAPMacro_params.yml, then a call to the runleapmacro.jl script could look something like this:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"D:\\path\\to\\model> julia runleapmacro.jl -ve","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"In this case, LEAP-Macro would report verbose errors in the log file, and would include energy sectors.","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"tip: Speeding up LEAPMacro with a pre-compiled system image\nIf Macro will be run multiple times from the command line, execution can be speeded up by pre-compiling the LEAPMacro plugin. In the sample files, there is a Windows batch file, make_LEAPMacro_sysimage.bat. Running this batch file (from the command line or by double-clicking) will generate a \"system image\" called LEAPMacro-sysimage.so. After running the batch file, put the system image in the folder where you want to run Macro and call Julia with an additional sysimage argument – julia --sysimage=LEAPMacro-sysimage.so ... – where ... is the name of your script followed by any command-line arguments. E.g., the call to runleapmacro.jl in the example above would becomeD:\\path\\to\\model> julia --sysimage=LEAPMacro-sysimage.so runleapmacro.jl -ve","category":"page"},{"location":"running-macro/#running-macro-from-LEAP","page":"Running the Macro model","title":"Running Macro from LEAP","text":"","category":"section"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"The Freedonia sample model includes a Visual Basic script for running Macro from LEAP. Located in the scripts folder, and called LEAPMacro_MacroModelCalc.vbs, it can be placed in a LEAP Area folder and called from LEAP using LEAP's scripting feature. See the quick start guide for more information.","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"The Visual Basic script assumes that the Macro model files are in a folder called Macro and it calls a Julia file called LEAP-Macro-run.jl in that folder. The version of the LEAP-Macro-run.jl file distributed with the Freedonia sample model looks like this:","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"using LEAPMacro\n\ncurr_working_dir = pwd()\ncd(@__DIR__)\n\nprintln(\"Running Baseline...\")\nLEAPMacro.run()\n\ncd(curr_working_dir)","category":"page"},{"location":"running-macro/","page":"Running the Macro model","title":"Running the Macro model","text":"The default LEAP-Macro-run.jl file can be modified to run different configuration files.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"theoretical-background/#theoretical-background","page":"Theoretical background","title":"Theoretical background","text":"","category":"section"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Macro is a demand-led growth model[1] built along structuralist lines[2]. In such models, the growth rate of the economy is endogenous. That is, it is determined by the model's own dynamics. Firms are assumed to invest in new productive capacity because they anticipate future demand. They base their assessment on past growth, profitability, and the utilization rate of their current capacity. Once they decide to buy new machinery, equipment, and buildings – that is, new capital – those purchases add to total demand.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"In demand-led growth models, capacity utilization is a key adjusting variable. If firms' expectations are not met, then their capacity utilization will be either below or above what they anticipated. If demand is high and they are already producing at capacity, then they will be unable to satisfy all of the demand, and imports may rise.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Demand-led growth models can be contrasted with the more common supply-led growth models, in which growth is determined by the supply of savings. Savings are converted into investment and expanded production capacity. That capacity is presumed to be fully used, so capacity utilization is not an adjusting variable. Instead, prices adjust to clear markets.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"info: Comparison with CGE models\nThe most common types of macroeconomic models are econometric (statistical) models and computable general equilibrium (CGE) models. The Macro model is closest in spirit to CGE models. The core of a CGE is an accounting identity, and Macro imposes that identity through a linear goal program (LGP). In fact, CGE modeling is fully compatible with a structuralist approach: examples can be found in the book Socially Relevant Policy Analysis: Structuralist Computable General Equilibrium Models for the Developing World, edited by Lance Taylor. The Macro model differs from a CGE because it combines the LGP with dynamic processes that can be out of equilibrium.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Prices for goods and services may be treated with greater or lesser sophistication in demand-led models, but they play a less central role than in supply-led models. In general, demand for products is considered to be more responsive to income than to price, and firms are assumed to set prices by mark-up. More emphasis is placed on \"macroeconomic prices\", including wage rates, the interest rate set by the central bank, and the exchange rate. The Macro model includes these macroeconomic prices, as well as domestic and world prices of goods and services, which influence the volume of imports and exports.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"warning: Macro does not include financial assets\nAn important component in many structuralist models, as well as demand-led Stock-Flow Consistent (SFC) models, is the impact on the non-financial economy of changing wealth allocation and valuations of financial assets. The Macro model does not keep track of financial assets, which limits the policies that it can simulate.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"[1]: E.g., see: The Economics of Demand-Led Growth by Mark Setterfield and Post-Keynesian Economics: New Foundations by Marc Lavoie.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"[2]: See: Reconstructing Macroeconomics: Structuralist Proposals and Critiques of the Mainstream by Lance Taylor; Growth and Policy in Developing Countries: A Structuralist Approach by Jose Ocampo, Codrina Rada, and Lance Taylor.","category":"page"},{"location":"theoretical-background/#Demand-in-the-Macro-model","page":"Theoretical background","title":"Demand in the Macro model","text":"","category":"section"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Demand in the Macro model comes from four sources: final domestic demand (made up of households, non-profits serving households, and government); export demand net of imports; investment expenditure; and intermediate demand by economic sectors for the products of other sectors.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Final domestic demand is assumed to grow with total wages, adjusted by an elasticity for each product. The elasticities account for different responses to rising income. For example, household demand for processed food in a developing country might rise faster than demand for agricultural produce as wages rise. Because household and government expenditure are combined in the Macro model, wages are assumed to drive all components of final domestic demand.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Income elasticities of demand have been observed to change as incomes rise; for example, demand for manufactures responds more strongly to income at low income levels than at high income levels. The Macro model mimics this pattern by having most (but not all) income elasticities approach a value of one over time; for details, see the explanation for long-run demand elasticities.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Exports are driven by global GDP growth, adjusted by an elasticity for each product, with a further adjustment due to relative changes between the prices prevailing on world markets and the prices offered by domestic producers. The growth rate of global GDP is set outside the model in the time series parameter file. If global demand for a country's products is expected to grow particularly fast, for example from export promotion policies, then the elasticity can be set to a high value in the product parameters file; as for the income elasticities of final domestic demand, most export income elasticities approach a value of one over time. To capture the impact of domestic versus world prices, the price elasticity of export demand can also set in the product parameters file.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Imports are adjusted in order to meet goals in a linear goal program. Imports are anchored based on a \"normal\" level as a fraction of domestic demand. The normal level is initialized based on the supply-use table. It is then adjusted in two ways: first, by following trends in imports as calculated by the linear goal program; second, through a price adjustment. The price adjustment depends on a price elasticity of substitution between imports and exports that is set in the product parameters file.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Investment expenditure is a key variable in demand-led models, and is calculated endogenously. In Macro, investment rates depend on profitability, the past growth trajectory, capacity utilization, the (simulated) interest rate set by the central bank, and (optionally) the ratio of net exports to GDP. If net exports are negative, then investment exceeds domestic saving, so finance is being provided from abroad. It is therefore a measure of dependence on foreign finance.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Intermediate demand is determined through the supply-use table, and is calculated through the Macro model's linear goal program. Intermediate demand coefficients can optionally depend on changing relative prices, as explained in the Technical Details.","category":"page"},{"location":"theoretical-background/#theoretical-background-prices","page":"Theoretical background","title":"Prices in the macro model","text":"","category":"section"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Five prices appear in the Macro model:","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"World prices for traded goods and services\nThe exchange rate\nDomestic prices of goods and services\nWages\nThe central bank rate","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"In the Macro model, prices of trading partners (the \"world prices\") are set exogenously. By default, world prices for all goods and services rise at the same inflation rate, with a constant real price. Optionally, real price trends for selected tradeables can be specified on a product-by-product basis.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"The exchange rate is also exogenous, and is specified in the time series parameter file. By default, the series is the nominal exchange rate, but can alternatively be set as the real exchange rate.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Basic prices – what domestic consumers pay – is a trade-weighted average of world and domestic prices. Domestic prices for goods and services are determined as a mark-up on cost of labor and intermediate inputs. Because some intermediate inputs are imported, domestic prices tend to track world prices in the model.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"Wages rise more or less in proportion to inflation through a wage indexation parameter (called infl_passthrough in the configuration file). They also rise and fall in response to the difference between the growth rate of the demand for labor and the growth rate of the working-age population (through a further parameter, lab_constr_coeff). The growth rate of the working-age population is exogenous, and is specified in the time series parameter file, while the demand for labor is calculated endogenously.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"The central bank rate is set using what is known as a \"Taylor rule\". Under such a rule, the interest rate is raised when the economy grows faster than a target rate in order to \"cool off\" an expansion and reduced when it grows more slowly. It is also raised when inflation exceeds a target, on the assumption that inflation is driven by an economic expansion, and reduced when inflation is below the target. The Taylor rule parameters are set in the configuration file, including the initial value for the neutral interest rate – that is, the rate that prevails when the economy is at its target growth and inflation rates.","category":"page"},{"location":"theoretical-background/","page":"Theoretical background","title":"Theoretical background","text":"In reality, interest rates and exchange rates are linked, with influences flowing in both directions. Many developing countries feature strong currencies, reflected in an appreciated (low) exchange rate, combined with high interest rates. Conversely, a devaluation, which raises the exchange rate, can lead to a decline in the interest rate. Together, these observations suggest that interest rates and exchange rates tend to move in opposite directions. While that is a common pattern, it is possible for the interest rate to be positively related. The Macro model allows the target interest rate to adjust towards a level that depends either positively or negatively on the nominal exchange rate.","category":"page"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"leap-macro-link/#leap-macro-link","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"","category":"section"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"The link between the LEAP energy model and the Macro economic model is shown in the diagram below. For each of the sub-models – LEAP and Macro – most of the model development can be done independently. That allows energy experts to work on LEAP and economists to work on Macro, collaborating only where the models interact.","category":"page"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"The combined model is solved iteratively. The Macro model runs first, generating economic activity levels as inputs to LEAP. Then, LEAP runs, simulating the energy system. Among other results, LEAP may report energy sector investment, the supply of primary energy sources, and prices. These outputs can become inputs to the Macro model. If investment is calculated anywhere in LEAP, then it is collected and fed as an input to Macro. Primary energy production and prices are transferred if the correspondence between LEAP and Macro is specified in the configuration file.","category":"page"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"After LEAP runs, the Macro model runs again, and the iteration proceeds until the maximum percent difference in economic activity levels in subsequent runs falls below a user-specified tolerance. In practice, only a few iterations (2 to 3) should be sufficient.","category":"page"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"(Image: The LEAP-Macro process diagram)","category":"page"},{"location":"leap-macro-link/","page":"LEAP-Macro link","title":"LEAP-Macro link","text":"The Macro model requires a supply-use table and some parameter files as inputs, as well as a configuration file. The mapping between Macro and LEAP is managed through the configuration file.","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"variables/#variables","page":"Variables","title":"Variables","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"The Macro model contains three types of variables:","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"The goal program variables are solved in each time step (equal to one year) using a linear goal program.\nThe dynamic parameters appear as parameters in the goal program, but are updated between runs. They are shown with an overline to make them easier to identify in the equations.\nAs the dynamic parameters are calculated, intermediate variables are introduced to simplify the equations and for reporting purposes.","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"In addition to model variables, there are exogenous parameters, some of which are optional. Exogenous parameters are shown with an underline to make them easier to identify in the equations. Some \"exogenous\" parameters, such as the target profit rate underliner^*, are in fact calculated from a combination of initial values and exogenous parameters, but are then held fixed.","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"Variables and parameters may be labeled by sector, by product, or both:","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\nn_s Number of sectors\nn_p Number of products\ni, j Sector indices, taking values from 1ldots n_s\nk, l Product indices, taking values from 1ldots n_p","category":"page"},{"location":"variables/#lgp-vars","page":"Variables","title":"Goal program variables","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\nu_i Capacity utilization in sector i\nDelta u_i Gap between full and realized utilization in sector i\ns_Xk Exports relative to the normal level for product k\nDelta s_Xk Gap between normal and realized exports as a share for product k\ns_Fk Final demand (household and government combined) relative to the normal level for product k\nDelta s_Fk Gap between normal and realized final demand as a share for product k\npsi^pm_k Import excess (+) or deficit (-) relative to the normal level as a multiplier on the reference level for product k\nX_k Exports of product k\nF_k Final demand for product k\nI_k Investment demand for product k\nM_k Imports of product k\nq_sk Domestic production of product k\nq_dk Intermediate demand for product k\nm^pm_k Positive (+) and negative (-) margins for product k","category":"page"},{"location":"variables/#dynamic-param-vars","page":"Variables","title":"Dynamic parameters","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\noverlinez_i Potential output for sector i\noverlinep_bk Basic price for product k as an index relative to the initial year\noverlineP_g Price level of output as an index relative to the initial year\noverlineI Demand for investment goods\noverlineX^textnorm_k Normal level of export demand for product k\noverlineF^textnorm_k Normal level of final demand for product k\noverlineM^textref_k Reference level of imports for product k\noverlinef_k Normal level of imports of good k as a fraction of domestic demand\noverlineD_ki Intermediate demand for product k per unit of output from sector i","category":"page"},{"location":"variables/#intermed-vars","page":"Variables","title":"Intermediate variables","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\ng_i Total output from sector i\nhatY Real GDP growth rate\np_dk Domestic price for product k as an index relative to the initial year\np_wk World price index for product k\np_xk Export-weighted average of world and domestic prices for product k\npi_bk Basic price inflation rate for product k\npi_dk Domestic price inflation rate for product k\npi_F Inflation rate for domestic final demand\npi_textGDP Inflation rate for the GDP price level\nW_i Nominal wage bill in sector i\nhatL Growth rate of employment\nhatw Growth rate of the nominal wage\nhatlambda Growth rate of labor productivity\nomega_i Wage share in sector i\ngamma_i Rate of net investment demand in sector i\ngamma_i0 The autonomous (smoothed) component of the rate of net investment demand in sector i\ni_b Central bank interest rate\ni_b0 Central bank interest rate when GDP growth and inflation are at their targets\nPi_i Gross profits in sector i\nr_i Gross rate of profit in sector i\ngamma^textwage Growth rate of the total wage bill\ngamma^textworld_textsmooth Smoothed growth rate of world GDP (also termed gross world product, GWP)\nf_k Current level of imports of good k as a fraction of domestic demand","category":"page"},{"location":"variables/#exog-param-vars","page":"Variables","title":"Exogenous parameters","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\nunderlinew_u In the linear goal program, the category weight penalizing low utilization\nunderlinew_F In the linear goal program, the category weight penalizing departure from normal final demand\nunderlinew_X In the linear goal program, the category weight penalizing departure from normal exports\nunderlinew_M In the linear goal program, the category weight penalizing imports over domestic supply\nunderlinesigma^u_i In the linear goal program, sector weight for utilization for sector i\nunderlinesigma^X_k In the linear goal program, product weight for exports for product k\nunderlinesigma^F_k In the linear goal program, product weight for final consumption demand for product k\nunderlinevarphi_u For utilization sector weights, weight of value share vs. constant share\nunderlinevarphi_F For final demand sector weights, weight of value share vs. constant share\nunderlinevarphi_X For export sector weights, weight of value share vs. constant share\nunderlineS_ik Sector i's share of domestic production of product k\nunderlineD^textinit_ki Initial value for intermediate demand for product k per unit of output from sector i\nunderlined_k Equal to underlined_k = 1 if the country does not produce product k and  underlined_k = 0 if it does produce it\nunderlinevarepsilon_i Initial energy cost share for sector i if energy excluded, otherwise zero\nunderlinee Exchange rate\nunderlinepi_wk Inflation rate for the world price of product k\nunderlinemu_i Profit margin in sector i\nunderlinealpha^textKV, underlinealpha^textKV_i Kaldor-Verdoorn law coefficient, for the whole economy or by sector i\nunderlinebeta^textKV, underlinebeta^textKV_i Kaldor-Verdoorn law intercept, for the whole economy or by sector i\nunderlineL_i0 Initial employment level for sector i, if labor productivity is specified by sector\nunderlineh Inflation pass-through to the nominal wage (wage indexation parameter)\nunderlinek Response of the real wage to labor supply constraints\nunderlinehatN Growth rate of the working-age population\nunderlinechi^pm_k Allocation coefficients for positive (+) and negative (-) margins for product k\nunderlinei^textinit_b0 Initial value for i_b0\nunderlinei^textmin_b0 underlinei^textmax_b0 Minimum and maximum values for i_b0\nunderlineb_textxr Sensitivity of i_b0 to changes in the exchange rate\nunderlineT_textxr Adaptation time for i_b0 to adjust to the target\nunderlinerho_Y Taylor coefficient on the GDP growth rate\nunderlinerho_pi Taylor coefficient on the inflation rate\nhatunderlineY^*_textmin hatunderlineY^*_textmax Minimum and maximum target growth rates for the Taylor rule\nunderlinepi^* Taylor rule target inflation rate\nunderlinepi_d^textinit Initial domestic price inflation rate\nunderlinegamma_0 Initial autonomous investment rate in the investment function\nunderlinexi Rate of adjustment of autonomous demand to realized growth rate\nunderlinealpha_textutil Response of induced investment to capacity utilization (utilization investment sensitivity)\nunderlinealpha_textprofit Response of induced investment to profitability (profit rate investment sensitivity)\nunderlinealpha_textbank Response of induced investment to borrowing costs (interest rate investment sensitivity)\nunderlinealpha_textnetx Response of induced investment to the ratio of net exports to GDP (due to perceived lender's risk)\nunderliner^* Target rate of gross profit (in the investment function)\nunderlinedelta_i Depreciation rate for sector i\nunderlinev_i Capital-output ratio in sector i\nunderlinetheta_k Share of product k in the total supply of investment goods\nunderlinegamma^textworld Growth rate of world GDP (also termed gross world product, GWP)\nunderlineeta^textexp_k Elasticity of normal export demand for product k with respect to a change in GWP\nunderlineeta^textwage_k Elasticity of normal final demand for product k with respect to a change in the wage bill\nunderlinephi^textexp_k underlinephi^textimp_k Elasticities of export and import demand with respect to relative price changes","category":"page"},{"location":"variables/#optional-exog-param-vars","page":"Variables","title":"Optional exogenous parameters","text":"","category":"section"},{"location":"variables/","page":"Variables","title":"Variables","text":"The following are optional exogenous parameters:","category":"page"},{"location":"variables/","page":"Variables","title":"Variables","text":"Symbol Definition\nunderlineI_texten Energy sector investment, retrieved from LEAP\nunderlineI_textexog Other exogenous investment, not associated with a sector (default is 0.0)\nunderlinez_i^textexog Exogenously specified potential output (default is that Macro calculates potential output)\nunderlineu_i^textmax In the linear goal program, the maximum capacity utilization (default is 1.0)\nunderlinea_i Rate constant for endogenous intermediate demand coefficients\nunderlinevartheta_i Exponent for endogenous intermediate demand coefficients","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"quickstart/#quick-start","page":"Quick start","title":"Quick start","text":"","category":"section"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"This documentation explains how to quickly run Macro without linking it to LEAP. To learn how to run Macro with LEAP, see the LEAP exercise, but it is a good idea to follow this Quick Start first.","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"The quickest way to get started with Macro is by running the \"Freedonia\" sample model:","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"Download the demonstration files as a zip file and save it to the folder of your choice\nUnzip the Macro.zip file\nGo the folder where you unzipped it (it will have a file in it named LEAPMacro_params.yml, together with several other files)\nStart Julia in that folder and run the demo model:","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"julia> import LEAPMacro\n\njulia> LEAPMacro.run()\nWith configuration file 'LEAPMacro_params.yml':\nMacro model run (0)...completed\n0","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"If you see Macro model run (0)...completed followed by 0 then the model ran without any errors. The line reading With configuration file 'LEAPMacro_params.yml' says that Macro found and applied a configuration file with the default filename LEAPMacro_params.yml.","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"All of the interesting output is in files. You should see a new file called LEAPMacro_log_Baseline.txt and a new outputs folder.","category":"page"},{"location":"quickstart/#The-log-file","page":"Quick start","title":"The log file","text":"","category":"section"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"The log file LEAPMacro_log_Baseline.txt should show something like:","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"[ Info: 2022-08-21T10:43:55.627\n[ Info: Configuration file: 'LEAPMacro_params.yml'\n[ Info: Macro model run (0)...\n[ Info: Loading data...\n[ Info: Preparing model...\n[ Info: Calibrating for 2010: FEASIBLE_POINT\n[ Info: Running from 2011 to 2040:\n[ Info: Simulating for 2011: FEASIBLE_POINT\n[ Info: Simulating for 2012: FEASIBLE_POINT\n[ Info: Simulating for 2013: FEASIBLE_POINT\n[ Info: Simulating for 2014: FEASIBLE_POINT\n[ Info: Simulating for 2015: FEASIBLE_POINT\n...\n[ Info: Simulating for 2035: FEASIBLE_POINT\n[ Info: Simulating for 2036: FEASIBLE_POINT\n[ Info: Simulating for 2037: FEASIBLE_POINT\n[ Info: Simulating for 2038: FEASIBLE_POINT\n[ Info: Simulating for 2039: FEASIBLE_POINT\n[ Info: Simulating for 2040: FEASIBLE_POINT\n[ Info: 2022-08-21T10:44:28.068","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"The time stamps at the start and end show that the model ran in 32 seconds. The repeated FEASIBLE_POINT for each year means that the model in each year yielded a feasible solution to the linear goal program.","category":"page"},{"location":"quickstart/#The-outputs-folder","page":"Quick start","title":"The outputs folder","text":"","category":"section"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"The outputs folder should have a subfolder called Baseline. Inside that folder are three other folders, with CSV files containing diagnostic information and the results of the model run.","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"info: Comma-separated variable (CSV) files\nCSV-formatted files are plain text files that can be viewed in a text editor. They can also be opened and modified in Excel, Google Sheets, or other spreadsheet program, which is a convenient way to edit them. ","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"The folder structure looks like this:","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"otuputs \n└───Baseline\n    └───calibration\n        │   basic_prices_0.csv\n        │   capacity_utilization_0.csv\n        │   ...\n        │   wage_share_0.csv\n    └───diagnostics\n        │   demand_coefficients.csv\n        │   domestic_production.csv\n        │   ...\n        │   wages.csv\n    └───results\n        │   autonomous_investment_rate_0.csv\n        │   basic_prices_0.csv\n        │   ...\n        │   sector_output_0.csv","category":"page"},{"location":"quickstart/","page":"Quick start","title":"Quick start","text":"There is a great deal of information in the files: see the pages on the configuration file and the output files.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"dynamics/#dynamics","page":"Dynamics","title":"Dynamics","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In between runs of the linear goal program, the dynamic parameters and intermediate variables are updated. After the dynamic parameters have been updated, the linear goal program is run for the subsequent year.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In the equations below, a subscript +1 indicates the next-year's value, and a subscript -1 the previous year's value. An underline indicates an exogenous parameter, while an overline is a dynamic parameter.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"info: Potential sector output vs. potential production\nOne of the most important variables in the Macro model is potential output for a sector i, overlinez_i. Realized output g_i is equal to potential output multiplied by capacity utilization u_i.Ordinarily, potential output is determined by investment through an investment function. However, Macro allows for potential output to be specified exogenously in an optional parameter file. This is presumed to reflect an informed policy decision that takes demand into account, so Macro adjusts import and export targets accordingly.One complicating factor is that potential output is for a sector, whereas demand for exports and imports are for products. The connection between sectors and products is provided by the supply matrix. Defining a matrix    Omega_ik = frac1g_iS_ikq_skpotential production q_sk^* of product k due to exogenously specified sector output is calculated as    q_sk^* = sum_i=1^n_s underlinez_i^textexogOmega_ikBecause in general there is not a one-to-one correspondence between sectors and products, some potential production may not be due to exogenously specified sector output. This is captured in the fraction f_k^textexog of potential output of product k due to exogenously specified sector output, which is calculated as    f_k^textexog = fracsum_i=1^n_sunderlinez_i^textexogOmega_iksum_i=1^n_s z_iOmega_ikThese two variables – q_sk^* and f_k^textexog – appear in expressions for target exports and for import fractions.","category":"page"},{"location":"dynamics/#dynamics-prices","page":"Dynamics","title":"Prices","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"For an explanation of the different prices, see the explanation in About demand-led growth.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"World prices grow at an exogenously specified inflation rate underlinepi_wk,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    overlinep_wk+1 = left(1 + underlinepi_wkright)p_wk","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"By default, a uniform inflation rate is applied to all traded goods, while the real price is constant, so that underlinepi_wk = underlinepi_w. However, optionally, a real price index for an individual product k can be specified: see World real price trends for selected tradeables.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The output price level is given by","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    overlineP_g+1 = left(1 + pi_gright)overlineP_g","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"where the inflation rate pi_g is given by the averge of the rate of increase in basic prices, weighted by domestic supply,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    pi_g = fracsum_k = 1^n_p q_skpi_bksum_k = l^n_p q_sl quad pi_bk = fracp_bk-p_bk-1p_bk-1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The inflation rate pi_F of final domestic demand is the average of the rate of increase of basic prices weighted by the value of final domestic demand,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    pi_F = fracsum_k = 1^n_p F_kpi_bksum_k = l^n_p F_l","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The GDP inflation rate pi_textGDP is the average of the rate of increase of basic prices weighted by the value of total final demand. It is calculated as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    pi_textGDP = fracsum_k = 1^n_p V_kpi_bksum_k = l^n_p V_lquad V_k = overlinep_bk-1left(F_k + X_k + I_k - M_kright)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Basic prices are a weighted average of domestic and foreign prices, with the weight given by the import fraction f_k, where","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    f_k = fracM_kq_dk + F_k + I_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Basic prices are therefore","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    overlinep_bk = f_k underlineep_wk + left(1 - f_kright)p_dk","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"If f_k = 1, meaning the country does not produce product k and all supply is from imports, then overlinep_bk = underlineep_wk. Otherwise, domestic prices are set as a mark-up on costs, where costs are in terms of basic prices","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":" p_dk = sum_i = 1^n_s underlinemu_iunderlineS_ik\n    left\n        overlineP_gleft(omega_i + varepsilon_iright) + sum_l = 1^n_p overlinep_bl overlineD_li\n    right","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In this equation, omega_i is the wage share for sector i and varepsilon_i is the energy share.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Taken together, the equations above lead to a linear system in domestic prices,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"p_dk = overlineP_gsum_i = 1^n_s underlinemu_iunderlineS_ikleft(omega_i + varepsilon_iright) + underlineesum_l = 1^n_p A_kl f_l overlinep_wl + sum_l = 1^n_p A_kl left(1 - f_lright)p_dl","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"where","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    A_kl = sum_i = 1^n_s underlinemu_iunderlineS_ikoverlineD_li","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"This system is solved by Macro using linear algebra.","category":"page"},{"location":"dynamics/#dynamics-imports","page":"Dynamics","title":"Imports","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The normal level of imports of good k as a fraction of domestic demand (intermediate, final, and investment) is updated based on the values calculated in the last run of the linear goal program, and then adjusted based on relative changes in world and domestic prices,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlinef_k = f_k left(frac1 + pi_dk1 + underlinepi_wkright)^(1 - f_k)underlinephi^textimp_kquad f_k = fracM_kq_dk + F_k + I_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Note that when pi_dk and underlinepi_wk are much smaller than one, this is approximately equal to","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlinef_k approxeq f_k + f_kleft(1 - f_kright)underlinephi^textimp_k left(pi_dk - underlinepi_wkright)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In this formulation, the parameter underlinephi^textimp_k is seen to be an Armington elasticity[1] of substitution between domestic products and imports. The factor f_kleft(1 - f_kright) arises because the elasticity is applied to the import share rather than to imports and domestic products separately.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The reference import demand, which appears as a scale factor in the linear goal program, is set equal to twice the calculated volume of imports,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineM^textref_k = 2 M_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The multiple of two is somewhat arbitrary, because this simply sets a scale.","category":"page"},{"location":"dynamics/#dynamics-exog-output-imports","page":"Dynamics","title":"Adjustments for exogenously specified production","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When potential output is exogenously specified, imports are assumed to change opposite to the exogenous trend. So, for example, if exogenous potential sector activity is expanding, then the normal level of imports is assumed to decline. Whether actual imports in fact decline or not depends on the results of running the linear goal program.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The extended expression for the import fraction uses the variables q_sk^* and f_k^textexog defined in the information box \"Potential sector output vs. potential production\" at the top of this page,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlinef_k = left1 + f_k^textexogleft(fracq_sk^*q_sk+1^* - 1right)right f_k left(frac1 + pi_dk1 + underlinepi_wkright)^(1 - f_k)underlinephi^textimp_kquad f_k = fracM_kq_dk + F_k + I_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Note that despite the similar notation, the variables f_k^textexog and f_k refer to different types of quantities: f_k^textexog is the share of potential production due to exogenously specified sector output, whereas f_k is the import share calculated from the outputs of the linear goal program.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The reference level of imports is adjusted by the same factor,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineM^textref_k = 2 M_k left1 + f_k^textexogleft(fracq_sk^*q_sk+1^* - 1right)right","category":"page"},{"location":"dynamics/#dynamics-dom-insert","page":"Dynamics","title":"Domestic insertion","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The Macro model reports an indicator called \"domestic insertion\". The term comes from the Caribbean structuralist tradition. That tradition notes that export-oriented firms must achieve an insertion into the global economy. However, for true development to occur, firms must also be inserted into the domestic economy to increase employment and demand for local products and services.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The domestic insertion indicator is defined in terms of two input-output matrices. First there is the standard input-output matrix, with elements","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"A_ij = sum_k = 1^n_p S_ikD_kj","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Then there is a domestic-only input-output matrix","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"A^textdom_ij = sum_k = 1^n_p S_ik(1 - f_k)D_kj","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"This matrix captures the direct demand by domestic firms for domestic products.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The total of direct and indirect demand is calculated using the corresponding Leontief inverses,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"mathbfL = left(mathbbI - mathbfAright)^-1qquad mathbfL^textdom = left(mathbbI - mathbfA^textdomright)^-1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The domestic insertion indicator for sector i is defined in terms of these Leontief inverses as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"(textdomestic insertion)_i equiv fracsum_j=1^n_s L^textdom_jisum_j=1^n_s L_ji","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"This gives the ratio of the domestic to the total demand per unit output from sector i, including both direct and indirect demand.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"[1]: Armington elasticities play an important role in trade models, but estimates very widely, and are mainly available for high-income countries. As a general rule, long-run elasticities (e.g., annual) are larger than short-run elasticities (e.g., monthly), and estimates tend to increase with the level of disaggregation of the data. Different statistical models can give very different results (e.g., estimates from systems of supply-demand equations tend to be about twice as large as estimates based on demand alone). If possible, find estimates for the country where Macro is being applied and at a similar level of disaggregation.","category":"page"},{"location":"dynamics/#dynamics-labor-prod","page":"Dynamics","title":"Labor productivity","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The Macro model offers two ways to specify labor productivity growth: by 1) setting a labor productivity growth rate; or 2) allowing labor productivity to respond positively to economic growth, following the Kaldor-Verdoorn law[2]. In either specification, parameters can be specified either by sector or for the whole economy. Sectoral labor productivity is written with a subscript, lambda_i, while economy-wide labor productivity is written with no subscript, lambda","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When Kaldor-Verdoorn parameters are specified by sector, the Macro model calculates","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatlambda_i = underlinealpha^textKV_i hatg_i + underlinebeta^textKV_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When specified at the level of the whole economy, economy-wide labor productivity growth responds to growth in GDP,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatlambda = underlinealpha^textKV hatY + underlinebeta^textKV","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"If labor productivity is specified as a constant value, either by sector or for the whole economy, Macro still applies the Kaldor-Verdoorn formula, but with underlinealpha^textKV_i = 0 and underlinebeta^textKV_i equal to the specified labor productivity growth rate.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When productivity growth is specified for the economy as a whole, productivity growth in each sector is set to the economy-wide value, hatlambda_i = hatlambda.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"info: Formulations of the Kaldor-Verdoorn law\nThe Kaldor-Verdoorn law has been expressed in multiple ways. The formulation used in the Macro model is one of the most common. Another is to write the equation in terms of employment growth hatL = hatY - hatlambda, in which case the coefficient on the growth rate is 1 - underlinealpha^textKV.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When parameters are specified by sector, employment, L, is the sum of sector employment L_i. For this reason, initial values for sectoral employment underlineL_i0 must be specified for sectoral labor productivity growth. Employment growth in sector i is calculated as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatL_i = frac1 + hatg_i1 + hatlambda_i - 1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"From this it can be seen that if the Kaldor-Verdoorn law is applied, then output growth contributes both positively (through the numerator) and negatively (through the denominator) to sectoral employment growth. The closer the Kaldor-Verdoorn coefficient underlinealpha^textKV_i is to one, the less rapidly employment will grow when a sector expands. That is, a high value for the Kaldor-Verdoorn coefficient means that a sector is productivity-enhancing, but might not be labor-absorbing.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"For the sectoral labor productivity model, the growth rate of total employment, L, can be calculated from L = sum_i L_i at two adjacent time steps. When labor productivity is specified at the level of the whole economy, total employment growth is calculated as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatL = (1 + hatY)(1 + hatlambda) - 1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"[2]: The Kaldor-Verdoorn law states that the growth rate of labor productivity is an increasing function of the growth rate of output. The coefficient relating output growth to labor productivity growth is often taken as a measure of increasing returns. If it is positive, then there are both static and dynamic increasing returns to growth. In the context of the Macro model, these take the form of learning-by-doing, where productivity increases with use of existing technology; and embodied technological change, where productivity increases with the introduction of improved technology.","category":"page"},{"location":"dynamics/#dynamics-wages","page":"Dynamics","title":"Wages","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The wage share omega_i in sector i is given by","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"omega_i = fracW_ig_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The wage bill W_i is by definition equal to the wage rate w_i multiplied by sectoral employment L_i, while output g_i is by definition equal to real labor productivity lambda_i muliplied by the price level of output overlineP_g and sectoral employment. So, the wage share can also be written as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"omega_i = fracw_i L_ioverlineP_glambda_i L_i = frac1overlineP_gfracw_ilambda_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Sectoral and economy-wide productivity growth hatlambda_i and hatlambda are discussed in the previous section, together with the growth in the labor force hatL. This section focuses on the determination of the wage.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Wages are observed to rise in a tight labor market and fall otherwise. That behavior is captured in the model through a \"conflict\" mechanism, which views nominal wage changes as a consequence of bargaining between parties with unequal and shifting bargaining power – employers and employees. The real wage is assumed to rise faster than labor productivity when employment growth is higher than working-age population growth hatunderlineN (an exogenous time series parameter), with a proportionality factor underlinek, and fall otherwise. The nominal wage is then equal to the real wage adjustment plus an inflation pass-through (or wage indexation) parameter underlineh multiplied by the final domestic demand inflation rate,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatw_i = underlinehpi_F + hatlambda_ileft1 + underlinekleft(hatL - hatunderlineNright)right","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Note that underlineh and underlinek are assumed to be the same in each sector. In fact, inflation pass-through and response to labor market conditions are likely to differ between sectors. However, the data required to calibrate these parameters at sector level are scarce, so for simplicity the same value is assigned to each sector.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"With the above expressions, the growth rate of the wage share can be calculated,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatomega_i = frac1 + hatw_i(1 + hatlambda_i)(1 + pi_g) - 1","category":"page"},{"location":"dynamics/#dynamics-intermed-dmd-coeff","page":"Dynamics","title":"Intermediate demand coefficients","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"By default, intermediate demand coefficients are kept at their initial values: overlineD_ki = underlineD^textinit_ki. However, optionally, they can be endogenized through a cost share-induced technological change mechanism[3]. The growth rates of the coefficients are calculated as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatoverlineD_ki = underlinea_ileftunderlineD^textinitunderlinevartheta_i - 1_ki - left(fracsum_l=1^n_p underlineD^textinitunderlinevartheta_i_lisum_l=1^n_p alpha^underlinevartheta_i_liright)^fracunderlinevartheta_i-1underlinevartheta_ialpha_ki^underlinevartheta_i - 1right","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"where underlinea_i is the rate constant for sector i and underlinevartheta_i is the exponent. These are specified either in the configuration file or in the sector parameters file. The alpha_ki are cost shares, which are calculated consistent with the calculation of prices.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In the first time step, alpha_ki = underlineD^textinit_ki, so the the ratio in parentheses starts out equal to one, and the initial growth rates are hatoverlineD_ki = 0.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"[3]: The equation shown here is a special case of a more general model that is presented in A classical-evolutionary model of technological change by Eric Kemp-Benedict.","category":"page"},{"location":"dynamics/#Profit-rate","page":"Dynamics","title":"Profit rate","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Profitability is reflected in the sector profit rate r_i – that is, profit divided by the replacement cost of capital. By default, profits are calculated as realized profits, taking capacity utilization into account. This is accomplished by calculating the revenue side of gross profit Pi_i as the realized value of output based on sales divided by potential output, while costs are multiplied by capacity utilization. The default expression is:","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Pi_i = frac1overlinez_isum_k=1^n_p underlineS_ik q_skp_xk -\n        u_i leftoverlineP_gleft(omega_i + varepsilon_iright) +\n              sum_k = 1^n_poverlinep_bkunderlineD_ki right","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Optionally, the profit rate can be calculated at full capacity utilization, in which case this expression is divided by u_i.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Basic prices are used on the cost side of this equation, while an export-weighted price p_xk is used on the revenue side, where","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"p_xk = fracX_kq_sk underlineep_wk + left(1 - fracX_kq_skright)p_dk","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The Macro model does not track the capital stock. Instead, it tracks potential output, which is related to the capital stock through a sector-specific capital-output ratio. The calculation for the profit rate starts with the current unit price of capital goods p_K, calculated as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"p_K = sum_k=1^n_punderlinetheta_k p_dk","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The profit rate is then given by profits divided by the product of the price of capital and the capital-output ratio underlinev_i,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"r_i = fracPi_ip_Kunderlinev_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Capital-output ratios are initialized using a procedure described below in Demand for investment goods.","category":"page"},{"location":"dynamics/#dynamics-potential-output","page":"Dynamics","title":"Investment & potential output","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Net potential output in sector i (that is, accounting for depreciation) grows at a rate gamma_i. Unless it is overridden by an optional exogenous potential output, the value is determined endogenously by an investment function that responds to utilization, profitability, borrowing costs (proxied by the central bank lending rate), and external lender risk (proxied by the ratio of net exports to GDP, with higher net exports corresponding to lower risk). The model assumes no active disinvestment, so the net growth rate is not allowed to fall below (the negative of) the depreciation rate,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"gamma_i = maxleftgamma_i0 + underlinealpha_textutilleft(u_i - 1right) +\n           underlinealpha_textprofitleft(r_i - underliner^*right) -\n           underlinealpha_textbankleft(i_b - underlinei^textinit_b0right) +\n           underlinealpha_textnetx C\n           -underlinedelta_iright","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"where C is the ratio of net exports to GDP. Using the GDP deflator P_textGDP calculated from pi_textGDP, this ratio is given by","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"C = fracsum_k=1^n_p p_wk(X_k-M_k)P_textGDPY","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The first term gamma_i0 is \"autonomous investment\". It represents long-run expectations. The other terms make up \"induced investment\" due to short-term changes in utilization, profits, borrowing costs, and net exports relative to GDP.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The target value for utilization is full utilization, u_i = 1, while for the bank rate it is the initial value for the neutral bank rate that enters the Taylor function, underlinei^textinit_b0 (see below). The target for the profit rate, underliner^*, is calculated by Macro during an internal calibration step to be consistent with starting values for investment and profits, using a procedure described below in Demand for investment goods. The net exports-to-GDP ratio term tends to push the economy towards a zero net exports, with no surplus or deficit. As net exports are the negative of net foreign financing (investments less domestic saving), the behavioral assumption behind this term is that foreign investors see a repayment risk when net foreign financing is high relative to GDP and, conversely, opportunities when there are net financing outflows.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"If potential output is specified exogenously through the variable underlinez_i^textexog, then ","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"gamma_i = underlinez_i+1^textexogunderlinez_i^textexog - 1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Potential output grows at the calculated rate,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlinez_i+1 = left(1 + gamma_iright)overlinez_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Autonomous investment follows adaptive expectations, with an initial value gamma_i0 = underlinegamma_0,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"gamma_i0+1 = gamma_i0 + underlinexileft(gamma_i - gamma_i0right)","category":"page"},{"location":"dynamics/#dynamics-taylor-rule","page":"Dynamics","title":"Central bank lending rate","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The central bank lending rate is updated through a Taylor rule of the form","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"i_b = i_b0 + underlinerho_Yleft(hatY - hatY^*right) + underlinerho_pileft(pi_F - underlinepi^*right)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"In Taylor’s original paper, the coefficients were underlinerho_Y = underlinerho_pi = 05, but they can be set by the user in the configuration file. Other parameters include initial, minimum, and maximum values for i_b0, the target inflation rate underlinepi^*, and a permissible band for the target GDP growth rate, hatunderlineY^*_textminhatunderlineY^*_textmax.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The initial value for the target GDP growth rate is the initial value for the autonomous investment rate, hatY^* = gamma_i0. It adjusts through adaptive expectations, with the same rate of adaptation as for autonomous investment, while keeping within the user-specified band,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"hatY^* = minlefthatunderlineY^*_textmax maxlefthatunderlineY^*_textmin\n                       hatY^* + underlinexileft(hatY - hatY^*right)rightright","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The neutral interest rate i_b0 can also adjust, depending on the nominal exchange rate underlinee. A target level i^*_b0 is calculated as a function of the nominal exchange rate relative to its initial value underlineeunderlinee_0:","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    i^*_b0 = underlinei^textmin_b0 + fracunderlinei^textmax_b0 - underlinei^textmin_b01 + a_textxr(underlineeunderlinee_0)^underlineb_textxrquad a_textxr = fracunderlinei^textmax_b0 - underlinei^textinit_b0underlinei^textinit_b0 - underlinei^textmin_b0","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"A example graph of this function is shown below for the case underlinei^textmin_b0 = 001, underlinei^textmax_b0 = 010, underlinei^textinit_b0 = 004. The neutral rate then moves towards the target as","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"    i_b0+1 = i_b0 + frac1underlineT_textxrleft(i^*_b0 - i_b0right)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"To make the interest rate insensitive to the exchange rate, set underlineb_textxr = 0.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"(Image: Target neutral interest rate vs. exchange rate)","category":"page"},{"location":"dynamics/#dynamics-inv-dmd","page":"Dynamics","title":"Demand for investment goods","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Total next-period demand for investment goods overlineI_+1 is given by three terms: 1) the sum across sectors of current potential output multiplied by the capital-output ratio and the gross rate of increase in potential output (the net rate plus the depreciation rate); 2) energy investment expenditure from LEAP underlineI_texten; 3) any other exogenous investment underlineI_textexog (see optional exogenous parameters and the format for the exogenous investment demand file). That is,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineI_+1 = sum_i=1^n_s overlinez_i underlinev_i left(gamma_i + underlinedelta_iright) + underlineI_texten+1 + underlineI_textexog+1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The total is allocated across investment goods supply shares underlinetheta_k in the linear goal program.","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Values for sectoral capital-output ratios underlinev_i and the target profit rate underliner^* are calculated using the equation for investment demand combined with the expression for the profit rate. Rearranging the equation for the profit rate gives","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"underlinev_i = fracPi_ip_K r_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The calibration is carried out by assuming that all sectors have the same profit rate, and that it is the target profit rate, underliner^*, so that","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"underlinev_i = fracPi_ip_K underliner^*","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Substituting this expression into the equation for investment demand and solving for underliner^* gives","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"underliner^* = frac1p_KoverlineI_+1sum_i=1^n_s Pi_i overlinez_i left(gamma_i + underlinedelta_iright)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The calibrated value for underliner^* is found by setting overlinez_i = g_i and gamma_i = underlinegamma_0. That value is then used to calculate capital-output ratios.","category":"page"},{"location":"dynamics/#dynamics-export-demand","page":"Dynamics","title":"Export demand","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"For most products, the normal level of export demand grows with global GDP (or gross world product, GWP) to a goods-specific elasticity, modified by the relative change in domestic and world prices,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineX^textnorm_k+1 = left(1 + underlinegamma^textworldright)^underlineeta^textexp_k left(frac1 + underlinepi_wk1 + pi_dkright)^underlinephi^textexp_k overlineX^textnorm_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"When potential output is exogenously specified, normal export demand is assumed to be supply-elastic – that is, it more or less keeps pace with the change in potential output – while still responding marginally to relative prices and fluctuations in global GDP. In this case, fluctuations in global GDP are calculated relative to a smoothed trend,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"gamma^textworld_textsmooth = gamma^textworld_textsmooth-1 + underlinexileft(underlinegamma^textworld - gamma^textworld_textsmooth-1right)","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Together with the variables q_sk^* and f_k^textexog explained in the information box \"Potential sector output vs. potential production\" at the top of this page, an extended expression for the change in the normal level of exports is given by","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineX^textnorm_k+1 = left1 + f_k^textexogleft(fracq_sk+1^*q_sk^* - 1right)right left(frac1 + underlinegamma^textworld1 + f_k^textexoggamma^textworld_textsmoothright)^underlineeta^textexp_k left(frac1 + underlinepi_wk1 + pi_dkright)^underlinephi^textexp_k overlineX^textnorm_k","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Note that when f_k^textexog = 0, this extended expression reduces to the default formula.","category":"page"},{"location":"dynamics/#dynamics-final-dom-demand","page":"Dynamics","title":"Final domestic demand","text":"","category":"section"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"Normal final domestic demand grows with the real wage bill to a goods-specific elasticity. The next-period nominal wage bill in sector i is calculated using variables and parameters introduced above,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineW_i+1 = frac1 + hatw1 + hatlambdaleft(1 + gamma_iright)W_i","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The growth in the real wage bill is given by these factors, but corrected for final domestic demand inflation pi_F,","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"gamma^textwage = frac11 + pi_Ffracsum_i=1^n_soverlineW_i+1sum_j=1^n_soverlineW_j - 1","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"The updated normal final domestic demand is then given by","category":"page"},{"location":"dynamics/","page":"Dynamics","title":"Dynamics","text":"overlineF^textnorm_k+1 = left(1 + underlinegamma^textwageright)^underlineeta^textwage_koverlineF^textnorm_k","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"isolate-energy/#isolate-energy","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"","category":"section"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The Macro model uses an approximation to separate a full input-output system, with both energy and non-energy sectors, into energy and a non-energy sub-systems.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"To explain the approximation, start with the full system written in matrix form. Total output is given by a vector mathbfg, technical (inter-industry) coefficients by a matrix mathbfA, a further set of technical coefficients matching final demand to different supplying sectors mathbfS, combined household and government final demand mathbfF, investment demand mathbfI, exports mathbfX, imports mathbfM, and margins[1] mathbfm. Separating into sub-matrices for energy (E) and non-energy (N) sectors, the system can be written","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"left(\n    beginarrayc\n        mathbfg_E \n        mathbfg_N\n    endarray\nright)\n=\nleft(\n    beginarrayc c\n        mathbfA_EE  mathbfA_EN \n        mathbfA_NE  mathbfA_NN\n    endarray\nright)\nleft(\n    beginarrayc\n        mathbfg_E \n        mathbfg_N\n    endarray\nright)\n+\nleft(\n    beginarrayc c\n        mathbfS_EE  mathbf0 \n        mathbf0  mathbfS_NN\n    endarray\nright)\nleft\n    left(\n        beginarrayc\n            mathbfF_E \n            mathbfF_N\n        endarray\n    right)\n    +\n    left(\n        beginarrayc\n            mathbf0 \n            mathbfI_N\n        endarray\n    right)\n    +\n    left(\n        beginarrayc\n            mathbfX_E - mathbfM_E \n            mathbfX_N - mathbfM_N\n        endarray\n    right)\n    -\n    left(\n        beginarrayc\n            mathbfm_E \n            mathbfm_N\n        endarray\n    right)\nright","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"Investment goods are produced only by the non-energy sector, so only one non-zero vector appears in the equations above, mathbfI_N. However, demand can originate in either the energy or non-energy sectors.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The full system above can be written in terms of two linked systems. The balance for the energy system is","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"left(mathbbI - mathbfA_EEright)cdotmathbfg_E = mathbfA_ENcdotmathbfg_N +\n    mathbfS_EEcdotleft(mathbfF_E + mathbfX_E - mathbfM_E - mathbfm_Eright)","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"note: LEAP as an input-output system\nThe energy sub-system is essentially the system that LEAP solves: LEAP takes final demand for energy, adds it to demand for energy from non-energy economic sectors, and takes account of transfers of energy between energy production and transformation sub-sectors.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The non-energy system is","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"left(mathbbI - mathbfA_NNright)cdotmathbfg_N = mathbfA_NEcdotmathbfg_E +\n    mathbfS_NNcdotleft(mathbfF_N + mathbfI_N + mathbfX_N - mathbfM_N - mathbfm_Nright)","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"In principle this can be solved together with the LEAP calculation in an iterative manner. That would give a solution to the full input-output system. However, it raises some complications.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The term mathbfA_NEcdotmathbfg_E is demand for non-energy goods from the energy sector. But the energy sectors in LEAP, which should appear in mathbfg_E, are different from the list of energy sectors in the national accounts, which appear in mathbfA_NE. That means that LEAP's energy sectors must be mapped to the national accounts through a combination of aggregation and (possible) disaggregation. That mapping would have to change every time the energy sectors in LEAP are changed.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The mapping between the non-energy sectors in the Macro model and the non-energy drivers in LEAP is less problematic. Because LEAP is an energy planning model, the energy sector is developed in detail and the structure can change with the introduction of alternative energy scenarios. Other sectors are normally treated with much less detail and are less likely to change.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"For many countries, the mathbfA_NEcdotmathbfg_E term can be neglected. It is significant when the energy sector has a high level of demand for domestic non-energy goods and services. To take an important example, an oil exporter might provide professional services and manufactured parts to the oil sector, and these inputs might be important for employment and economic output. For most countries, however, the coupling will be small, and can be neglected. When it cannot be neglected, specific energy sectors, such as crude oil extraction, can be included in Macro's calculations, but potential output can be calculated by LEAP. An example for the coal sector is provided in the documentation for the configuration file","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"note: Measuring the significance to the economy of the supply of non-energy goods and services to the energy sector\nA measure of how significant non-energy supply to the energy sector is for the economy is calculated within the Macro model. It is reported when the flag to report diagnostics is set in the Macro configuration file: see the documentation on the diagnostics output files.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"The measure of the importance of energy sector demand for non-energy products is calculated by the following algorithm. First, a Leontief inverse matrix for the full inter-industry matrix, mathbfL^textfull, is calculated,","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"mathbfL^textfull = left\n    left(\n        beginarrayc c\n            mathbbI_EE  mathbf0 \n            mathbf0  mathbbI_NN\n        endarray\n    right)\n    -\n    left(\n        beginarrayc c\n            mathbfA_EE  mathbfA_EN \n            mathbfA_NE  mathbfA_NN\n        endarray\n    right)\nright^-1","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"Second, a \"reduced\" Leontief matrix mathbfL^textred is calculated, with mathbfA_NE set to zero,","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"mathbfL^textred = left\n    left(\n        beginarrayc c\n            mathbbI_EE  mathbf0 \n            mathbf0  mathbbI_NN\n        endarray\n    right)\n    -\n    left(\n        beginarrayc c\n            mathbfA_EE  mathbfA_EN \n            mathbf0  mathbfA_NN\n        endarray\n    right)\nright^-1","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"Finally, the measure R, is calculated as","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"R = 1 - fracsum_i=1^n_ssum_j=1^n_s L^textred_ijsum_i=1^n_ssum_j=1^n_s L^textfull_ij","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"This measure provides an order of magnitude estimate of the relative change in economic output in the non-energy sectors when mathbfA_NE is set to zero if demand is increased by the same amount for the output of all sectors. The economic interpretation of R is that it is the relative change in total non-energy output when energy sector demand for non-energy products is neglected.","category":"page"},{"location":"isolate-energy/","page":"Isolating the energy sector","title":"Isolating the energy sector","text":"[1]: Trade and transport margins correct for value assigned to sectors that merely convey goods. For example, it subtracts the value of trucked goods from the road transport sector (e.g., vegetables) and adds it to the corresponding goods-producing sector (e.g., agriculture). Margins sum to zero by construction.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"alert: LEAP-Macro is now AMES\nThe LEAP-Macro project has been renamed AMES, for Adaptable Macroeconomic Extension for Sustainability analysis. It is hosted on GitHub at the AMES.jl repository.","category":"page"},{"location":"#introduction","page":"Introduction","title":"LEAP-Macro","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This documentation explains how to use LEAP-Macro to build a linked energy-economic model.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"info: Accessing the code\nLEAP-Macro is open source and hosted on GitHub. If you wish to access the code, please visit the LEAP-Macro GitHub repository.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The energy system in a LEAP-Macro application is represented in LEAP, the Low Emissions Analysis Platform. The economy is represented in a macroeconomic model called Macro. This documentation will explain how to build a Macro model and link the model to LEAP.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"tip: Learning about LEAP\nTo learn how to build LEAP models, the LEAP website has extensive documentation and other learning materials. A demonstration version of the software can be downloaded at no cost. Free or discounted licenses are available for students and for those in low-income and middle-income countries: see LEAP's licensing policy for more detail.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"LEAP-Macro is a demand-led growth model for an open, multi-sector economy. It takes a set of supply and use tables as an input. It is a flexible model that can be adapted to specific country circumstances.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The focus of LEAP-Macro is on energy policy analysis. It is an economic extension – the Macro model – to the LEAP energy policy analysis and climate change mitigation assessment tool. While Macro can be run independently, it is not intended for use as a stand-alone economic planning model. Specifically, it was developed with two purposes in mind:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To provide economic drivers to LEAP that are grounded in the structure of the economy;\nTo estimate the impact of different energy investment scenarios on output and employment outside the energy sector.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"info: The role of energy in the economy\nLEAP-Macro assumes that energy is a crucial input into the rest of the economy. Also, the energy sector is assumed to be an important source of demand for investment goods. However, to simplify model development and maintenance, LEAP-Macro assumes that the energy transformation sector is not a major source of demand for goods and services supplied by the rest of the economy. LEAP-Macro calculates a statistic that estimates the importance of the energy transformation sector: see Isolating the energy sector for more details.In some countries, the energy extraction sector is important as a source of demand. In that case, LEAP can supply Macro with trends in primary production of resources such as coal, crude oil, and natural gas.","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"CurrentModule = LEAPMacro","category":"page"},{"location":"process-sut/#process-sut","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"","category":"section"},{"location":"process-sut/#The-supply-and-use-tables","page":"Processing the supply-use table","title":"The supply and use tables","text":"","category":"section"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"Information about supply and use tables (SUT) is provided elsewhere in this documentation. This page explains how the SUT is processed internally by Macro. The supply and use tables have the following structure:","category":"page"},{"location":"process-sut/#Supply-table","page":"Processing the supply-use table","title":"Supply table","text":"","category":"section"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":" Total (purchase price) Margins Taxes, etc. Total (basic price) Sectors Total (domestic production) Imports\nProducts mathbfq mathbfm mathbfT^d left(mathbfq-mathbfmright) mathbfV^T mathbfq^s mathbfM\nTotal     mathbfg^T  ","category":"page"},{"location":"process-sut/#Use-table","page":"Processing the supply-use table","title":"Use table","text":"","category":"section"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":" Total (purchase price) Sectors Total (industrial demand) Exports Final domestic demand Inventory changes\nProducts mathbfq mathbfU mathbfq^d mathbfX left(mathbfF + mathbfIright) DeltamathbfB\nWages  mathbfW^T    \nProfits  mathbfPi^T    \nTotal  mathbfg^T    ","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"For the remainder of this section, the notation from the Variables page is used, where an underline indicates an exogenous parameter, while an overline is a dynamic parameter.","category":"page"},{"location":"process-sut/#Demand-coefficients-and-supply-shares","page":"Processing the supply-use table","title":"Demand coefficients and supply shares","text":"","category":"section"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"Prices are indices equal to 1 in the initial year. Total output from sector i in the initial year (with prices set equal to 1) is calculated as","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"g_i = sum_k=1^n_p V_ik","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"The domestic supply of product k is equal to","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"q_sk = sum_i=1^n_s V_ik","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"Initial values for demand coefficients are then calculated as","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"underlineD^textinit_ki = frac1g_iU_ki","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"and supply shares are calculated as","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"underlineS_ik = frac1q_sk V_ik","category":"page"},{"location":"process-sut/#Adjusting-for-stock-changes-and-taxes","page":"Processing the supply-use table","title":"Adjusting for stock changes and taxes","text":"","category":"section"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"Stock changes and a tax correction are distributed over categories of demand by defining","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"c_k equiv fracDelta B_k - T^d_kF_k + X_k + I_k","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"and then transforming final demand, exports, and investment in the following way:","category":"page"},{"location":"process-sut/","page":"Processing the supply-use table","title":"Processing the supply-use table","text":"F_k rightarrow (1 + c_k)F_k X_k rightarrow (1 + c_k)X_k I_k rightarrow (1 + c_k)I_k","category":"page"}]
}
