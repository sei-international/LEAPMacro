<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Linear goal program · LEAP-Macro</title><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VFCCCS3YR4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VFCCCS3YR4');
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LEAP-Macro</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../quickstart/">Quick start</a></li><li><a class="tocitem" href="../leap-exercise/">LEAP exercise</a></li></ul></li><li><span class="tocitem">Model overview</span><ul><li><a class="tocitem" href="../leap-macro-link/">LEAP-Macro link</a></li><li><a class="tocitem" href="../theoretical-background/">Theoretical background</a></li></ul></li><li><span class="tocitem">Using LEAP-Macro</span><ul><li><a class="tocitem" href="../config/">Configuration file</a></li><li><a class="tocitem" href="../sut/">Supply-use table</a></li><li><a class="tocitem" href="../params/">External parameter files</a></li><li><a class="tocitem" href="../running-macro/">Running the Macro model</a></li><li><a class="tocitem" href="../model-outputs/">Output files</a></li><li><a class="tocitem" href="../prep-model/">Preparing a model</a></li><li><a class="tocitem" href="../pest-calib/">Calibrating with PEST</a></li></ul></li><li><span class="tocitem">Technical details</span><ul><li><a class="tocitem" href="../variables/">Variables</a></li><li class="is-active"><a class="tocitem" href>Linear goal program</a><ul class="internal"><li><a class="tocitem" href="#Domestic-goods-market-equilibrium"><span>Domestic goods market equilibrium</span></a></li><li><a class="tocitem" href="#Supply-of-intermediate-goods"><span>Supply of intermediate goods</span></a></li><li><a class="tocitem" href="#Capacity-utilization"><span>Capacity utilization</span></a></li><li><a class="tocitem" href="#lgp-investment-goods-allocation"><span>Investment goods allocation</span></a></li><li><a class="tocitem" href="#Final-demand"><span>Final demand</span></a></li><li><a class="tocitem" href="#Trade"><span>Trade</span></a></li><li><a class="tocitem" href="#Margins"><span>Margins</span></a></li></ul></li><li><a class="tocitem" href="../dynamics/">Dynamics</a></li><li><a class="tocitem" href="../isolate-energy/">Isolating the energy sector</a></li><li><a class="tocitem" href="../process-sut/">Processing the supply-use table</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Technical details</a></li><li class="is-active"><a href>Linear goal program</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Linear goal program</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sei-international/LEAPMacro.jl/blob/main/docs/src/lgp.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="lgp"><a class="docs-heading-anchor" href="#lgp">Linear goal program</a><a id="lgp-1"></a><a class="docs-heading-anchor-permalink" href="#lgp" title="Permalink"></a></h1><p>For the list of variables, their symbols, and their definitions, see the <a href="../variables/#variables">Variables</a> page.</p><p>The Macro model solves, in each year, a linear goal program (LGP) that seeks the following, potentially competing, objectives:</p><ol><li>Full utilization</li><li>Meeting or exceeding a &quot;normal&quot; level of final demand</li><li>Meeting or exceeding normal export demand</li><li>Minimizing the gap between normal and realized imports</li></ol><p>As with any goal program, the individual objectives are expressed in terms of a gap between a target level and the modeled level. The objective function is a weighted sum of the separate objectives:</p><p class="math-container">\[\min \underline{w}_u\sum_{i = 1}^{n_s} \underline{\sigma}^u_i\Delta u_i +
     \underline{w}_X\sum_{k = 1}^{n_p} \underline{\sigma}^K_k\Delta s_{X,k} +
     \underline{w}_F\sum_{k = 1}^{n_p} \underline{\sigma}^F_k\Delta s_{F,k} +
     \underline{w}_M\sum_{k = 1}^{n_p} \left(\psi^+_k + \psi^-_k\right).\]</p><p>All goal variables are scaled so that they take values between zero and one.</p><div class="admonition is-info"><header class="admonition-header">Sector and product specific weights vs. category weights</header><div class="admonition-body"><p>In the objective function, there are four &quot;category weights&quot;, <span>$\underline{w}_u$</span>, <span>$\underline{w}_X$</span>, <span>$\underline{w}_F$</span>, and <span>$\underline{w}_M$</span>. The category weights are specified in the <a href="../config/#config-lgp-weights">configuration file</a>.</p><p>In addition, there are sector or product-specific weights for for utilization, exports, and final demand, but not for imports. The reason is that while weights are needed to capture the relative importance of certain goods in output, the export basket, and household final demand, import flexibility simply allows for demand to be met when domestic production is insufficient, a consideration that does not privilege one product over another.</p><p>The sector or product weights are given as weighted average of two possible weighting schemes: the base-year shares of the different sectors or products in output (for utilization), exports, or final demand, or equal weights. The allocations between the two possible weighting schemes are specified by the product and sector weight parameters <span>$\underline{\varphi}_u$</span>, <span>$\underline{\varphi}_X$</span>, and <span>$\underline{\varphi}_F$</span>, which are also set in the <a href="../config/#config-lgp-weights">configuration file</a>.</p></div></div><p>When the <code>report-diagnostics</code> parameter is set to <code>true</code> in the <a href="../config/#config-output-folders">configuration file</a>, Macro will export the structure of the LGP for each year to <a href="../model-outputs/#model-outputs-diagnostics">the <code>diagnostics</code> folder</a> in a set of files with names like <code>model_0_yyyy.txt</code>. The output looks something like this:</p><pre><code class="nohighlight hljs">Min 1.7333333333333334 ugap[1] + 0.5333333333333333 ugap[2] + 0.6000000000000001 ugap[3] + ...
Subject to
 eq_util[1] : ugap[1] + u[1] == 1.0
 eq_util[2] : ugap[2] + u[2] == 1.0
 eq_util[3] : ugap[3] + u[3] == 1.0
 eq_util[4] : ugap[4] + u[4] == 1.0
...</code></pre><p>Each equation in the file is labeled, for example by <code>eq_util</code>. For reference, the label is provided for each equation listed below, along with a motivation and a mathematical expression.</p><h2 id="Domestic-goods-market-equilibrium"><a class="docs-heading-anchor" href="#Domestic-goods-market-equilibrium">Domestic goods market equilibrium</a><a id="Domestic-goods-market-equilibrium-1"></a><a class="docs-heading-anchor-permalink" href="#Domestic-goods-market-equilibrium" title="Permalink"></a></h2><p><code>eq_totsupply</code>: Equilibrium in the domestic goods market is met when domestic supply equals total demand (the sum of final demand and demand for intermediate goods, exports, and investment goods), net of imports, and corrected by margins. This is enforced by the condition</p><p class="math-container">\[q_{s,k} = q_{d,k} - m^+_k + m^-_k + X_k + F_k + I_k - M_k.\]</p><p><code>eq_no_dom_prod</code>: If the country does not produce a particular product <span>$k$</span>, then <span>$q_{s,k}$</span> must equal zero. This is enforced by the condition</p><p class="math-container">\[q_{s,k}\underline{d}_k = 0.\]</p><h2 id="Supply-of-intermediate-goods"><a class="docs-heading-anchor" href="#Supply-of-intermediate-goods">Supply of intermediate goods</a><a id="Supply-of-intermediate-goods-1"></a><a class="docs-heading-anchor-permalink" href="#Supply-of-intermediate-goods" title="Permalink"></a></h2><p><code>eq_intdmd</code>: Intermediate goods are required for production and are given by technical coefficients (calculated from the <a href="../process-sut/#process-sut">use table</a> and possibly <a href="../dynamics/#dynamics-intermed-dmd-coeff">updated dynamically</a>). Intermediate demand is determined by</p><p class="math-container">\[q_{d,k} - \sum_{i = 1}^{n_s} \overline{D}_{ki}\overline{z}_i u_i = 0.\]</p><h2 id="Capacity-utilization"><a class="docs-heading-anchor" href="#Capacity-utilization">Capacity utilization</a><a id="Capacity-utilization-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-utilization" title="Permalink"></a></h2><p><code>eq_io</code>: A core equation determines capacity utilization. It states that the value of domestic supply equals the value of domestic production:</p><p class="math-container">\[\sum_{k=1}^{n_p} \underline{S}_{ik} \overline{p}_{b,k}q_{s,k} - \overline{P}_g\overline{z}_i u_i = 0.\]</p><p><code>eq_util</code>: Deviations in utilization for sector <span>$i$</span> below the target value of <span>$u_i = \underline{u}_i^\text{max}$</span> are penalized in the goal program. (Note that <span>$\underline{u}_i^\text{max} = 1$</span> unless it is set exogenously. See <a href="../variables/#optional-exog-param-vars">optional exogenous parameters</a> and the format for the <a href="../params/#params-optional-max-utilization">maximum capacity utilization file</a>.) The deviation variable is calculated by imposing the condition</p><p class="math-container">\[u_i + \Delta u_i = \underline{u}_i^\text{max},\quad 0 \leq u_i,\Delta u_i \leq 1.\]</p><h2 id="lgp-investment-goods-allocation"><a class="docs-heading-anchor" href="#lgp-investment-goods-allocation">Investment goods allocation</a><a id="lgp-investment-goods-allocation-1"></a><a class="docs-heading-anchor-permalink" href="#lgp-investment-goods-allocation" title="Permalink"></a></h2><p><code>eq_inv_supply</code>: Total investment demand <span>$\overline{I}$</span> is supplied by a variety of sectors with shares <span>$\theta_k$</span>. This is enforced by the condition</p><p class="math-container">\[I_k = \underline{\theta}_k \overline{I}.\]</p><h2 id="Final-demand"><a class="docs-heading-anchor" href="#Final-demand">Final demand</a><a id="Final-demand-1"></a><a class="docs-heading-anchor-permalink" href="#Final-demand" title="Permalink"></a></h2><p><code>eq_F</code>: Final demand is expressed as a multiple of the normal level,</p><p class="math-container">\[F_k = s_{F,k} \overline{F}^\text{norm}_k.\]</p><p><code>eq_fshare</code>: The multiplier satsifies</p><p class="math-container">\[s_{F,k} + \Delta s_{F,k} = 1, \quad 0\leq s_{F,k}, \Delta s_{F,k} \leq 1.\]</p><h2 id="Trade"><a class="docs-heading-anchor" href="#Trade">Trade</a><a id="Trade-1"></a><a class="docs-heading-anchor-permalink" href="#Trade" title="Permalink"></a></h2><p><code>eq_X</code>: As with final demand, exports are expressed as a multiple of the normal level,</p><p class="math-container">\[X_k = s_{X,k} \overline{X}^\text{norm}_k.\]</p><p><code>eq_xshare</code>: The multiplier satsifies</p><p class="math-container">\[s_{X,k} + \Delta s_{X,k} = 1, \quad 0\leq s_{X,k}, \Delta s_{X,k} \leq 1.\]</p><p><code>eq_M</code>: Imports are given by a multiplier applied to total domestic demand, plus a possible deviation:</p><p class="math-container">\[M_k = \overline{f}_k\left(q_{d,k} + F_k + I_k\right) + \left(\psi^+_k - \psi^-_k\right) \overline{M}^\text{ref}_k.\]</p><h2 id="Margins"><a class="docs-heading-anchor" href="#Margins">Margins</a><a id="Margins-1"></a><a class="docs-heading-anchor-permalink" href="#Margins" title="Permalink"></a></h2><p><code>eq_margpos</code>: Positive margins are a fraction of total supply (domestic plus imports),</p><p class="math-container">\[m^+_k = \underline{\chi}^+_k \left(q_{s,k} + M_k\right).\]</p><p><code>eq_margneg</code>: Margins are allocated across products that correspond to the supply of those goods,</p><p class="math-container">\[m^-_k = \underline{\chi}^-_k \sum_{l = 1}^{n_p} m^+_l.\]</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../variables/">« Variables</a><a class="docs-footer-nextpage" href="../dynamics/">Dynamics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 1 September 2023 14:17">Friday 1 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
